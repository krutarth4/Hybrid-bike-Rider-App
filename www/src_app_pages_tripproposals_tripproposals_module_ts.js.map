{"version":3,"file":"src_app_pages_tripproposals_tripproposals_module_ts.js","mappings":"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","sources":["./src/app/pages/tripproposals/tripproposals-routing.module.ts","./src/app/pages/tripproposals/tripproposals.module.ts","./src/app/pages/tripproposals/tripproposals.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { TripproposalsPage } from './tripproposals.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TripproposalsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class TripproposalsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { TripproposalsPageRoutingModule } from './tripproposals-routing.module';\n\nimport { TripproposalsPage } from './tripproposals.page';\nimport \"leaflet.awesome-markers/dist/leaflet.awesome-markers\";\nimport { SharedModuleModule } from 'src/app/modules/sharedModule/shared-module/shared-module.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TripproposalsPageRoutingModule,\n    SharedModuleModule\n  ],\n  declarations: [TripproposalsPage]\n})\nexport class TripproposalsPageModule {}\n","import {\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n} from \"@angular/core\";\nimport \"leaflet.awesome-markers/dist/leaflet.awesome-markers\";\nimport { DeviceOrientation } from \"@awesome-cordova-plugins/device-orientation/ngx\";\nimport {\n  AlertController,\n  IonModal,\n  ModalController,\n  NavController,\n  NavParams,\n  Platform,\n} from \"@ionic/angular\";\nimport { AppComponent } from \"src/app/app.component\";\nimport { RestApiService } from \"src/app/services/rest-api/rest-api.service\";\n\nimport { File } from \"@awesome-cordova-plugins/file/ngx\";\nimport {\n  NativeGeocoderOptions,\n  NativeGeocoder,\n} from \"@awesome-cordova-plugins/native-geocoder/ngx\";\nimport { TransferService } from \"src/app/services/transferdata/transfer.service\";\nimport { StorageService } from \"src/app/services/storage/storage.service\";\nimport { Router } from \"@angular/router\";\n\nimport { MathematicalModel } from \"src/app/class/MathematicalModel/mathematical-model\";\nimport { Global } from \"src/app/class/Globalfunction/Global\";\nimport { Users } from \"src/app/interface/users\";\nimport { Swarm } from \"src/app/interface/swarm\";\nimport \"leaflet.smooth_marker_bouncing\";\nimport { TripProposalResponse } from \"src/app/interface/trip-proposal-response\";\nimport { Trip } from \"src/app/interface/trip\";\nimport { GetTripIntersecionsResponse } from \"src/app/interface/get-trip-intersecions-response\";\nimport { User } from \"src/app/interface/user\";\nimport { TripIntersection } from \"src/app/interface/trip-intersection\";\nimport { GetTripsResponse } from \"src/app/interface/get-trips-response\";\nimport { GetUserLocation } from \"src/app/interface/get-user-locations\";\n\ndeclare var NativeLogs: any;\ndeclare var L;\n\n@Component({\n  selector: \"app-tripproposals\",\n  templateUrl: \"./tripproposals.page.html\",\n  styleUrls: [\"./tripproposals.page.scss\"],\n})\nexport class TripproposalsPage implements OnInit {\n  @ViewChild(\"map\") mapElement: ElementRef;\n  @ViewChild(IonModal) modal: IonModal;\n  PotentialSwarmLocationUpdateInterval;\n  PotentialSwarmLocationUpdateInterval_duration: number = 2000; // unit : ms:\n  map2: any;\n  marker;\n  startLng;\n  startLat;\n  endLng;\n  endLat;\n  leavelat;\n  leavelng;\n  decodeRoute: any[];\n  lastPointRoute;\n  meetpts: any[] = [{ latitude: 0, longitude: 0 }];\n  meetlat;\n  meetlng;\n  decodedPolyline;\n  decodedPolyline3;\n  decodedPolyline2;\n  polyline =\n    \"}zq_IgulpA?DKCMC?K@SDi@XyD?MDi@Bg@Dg@VqFJ_BF}@Bg@B_@@GFcA@ODq@NeC@MF}@RgDNiCDg@F_A@M@KBSP_@@SBMNiCDe@B_@Bc@ZqFLqBXoEXsEFgAJuABa@NaC?IB_@Fo@Bi@FwALuCPwC@KDe@B]ZaFn@{J?M@W?WAYLaB?MBU@STuDJaBJ_BHuA@MR_DBa@B]JqA?MDa@@UJUDKLWbBoD@ADOHQJY@IBMJItAuCVm@HQDI|E@F?`@??kF?s@?qF?c@?k@?]?a@?U?S?Q?K?iA?oF?yBFc@Hu@XwAD[Hu@L_AH{@F{@FoA@mA?}@Ci@NAb@Ez@KJARCCg@?IS{HSyGKiD?WGsBAGAk@OaHEuAKqD?OCi@@_@?_@GyBG{BAIAGAKKYEIQa@AECKAEAIMaG?c@KeDG}BAY?UCo@A]C_AASCUa@}CAGMcAEMGIIEGADaAf@eBh@k@CKSw@AAEMOg@K_@CIu@aCe@yA_@mAQg@Oa@?Ea@uAc@sAAEGW@G?IWeAqA_GCKGWNUbBeCDIV_@dA{ADEHMDGZc@Vc@Ra@@ARw@dBsCdBqCd@M@CFIRY\\\\g@TcAb@q@fAcB_@}@sAgDWq@ED{BdDEFc@qAU\\\\q@gBiCaHkA_D[{@Si@K[IUYd@GQOa@a@iAW^OTc@sAOa@\";\n  polyline2 =\n    \"}zq_IgulpA?DKCMC?K@SDi@XyD?MDi@Bg@Dg@VqFJ_BF}@Bg@B_@@GFcA@ODq@NeC@MF}@RgDNiCDg@F_A@M@KBSVHhMtDNDnA}B|AiBh@u@v@gAr@}@j@_AjAeBLZl@i@Jc@@YX}@fBsEtBiFVaA@KBE?C@G?@ZDr@Bb@J`@HB@DBD@XJHOFGFIFKvAsFrCcLVaAfAiE@G@CD]FAVCJ[CuAB?@EVgAEu@CaFGiEIgEA]OaGEcACa@A]M_ECs@Cu@IsDEsBAaAAa@?a@CaCCaBAUAk@?KAk@GsAc@_JCYKeEAa@IoAAYGe@CYEWI}@Sk@U]?KAYCKKm@CoAAUAOEwAZEQ}FAe@KaE?]Cg@OqGImCC}@Aq@E}@IqDCq@EyAAIAc@Ce@?Ee@mPKgEIsDYqJE_BGUEWAMCiACq@Ac@I}CAKAWQmFWyIAYCgACmAGq@EYMcAa@wAKs@Ok@I[CISs@CKCGYcAOi@[gACOm@kBAGCEK_@Si@}@eCQ_@iAoCCGMYRa@@ARw@dBsCdBqCd@M@CFIRYg@TcAb@q@fAcB_@}@sAgDWq@ED{BdDEFc@qAUq@gBiCaHkA_D[{@Si@K[IUYd@GQOa@a@iAW^OTc@sAOa@\";\n\n  intersections = [];\n  intersection_distance = \"0\";\n  routes: Trip[] = [];\n\n  choosen_route_id = null;\n  choosen_route = this.routes[this.choosen_route_id];\n  popup: boolean = true;\n  streetname;\n  startpoint = { lng: null, lat: null };\n  endpoint = { lng: null, lat: null };\n  distance = [0, 0];\n  choosen_route_geometry;\n  users_positions: any;\n  first = { lng: 12.551, lat: 52.42 };\n  second = { lng: 12.557, lat: 52.419 };\n  indexpt;\n  steps;\n  iconBlue = L.AwesomeMarkers.icon({\n    icon: \"circle\",\n    markerColor: \"blue\",\n    prefix: \"fa\",\n    iconColor: \"white\",\n  });\n  bikeIcon = L.icon({\n    iconUrl: \"../assets/content/images/bike.png\",\n    iconSize: [32, 32], // size of the icon\n  });\n\n  swarmIcon = L.icon({\n    iconUrl: \"../assets/content/images/swarm1.png\",\n    iconSize: [32, 32], // size of the icon\n  });\n\n  meetingIcon = L.icon({\n    iconUrl: \"../assets/content/images/finish.png\",\n    iconSize: [32, 32], // size of the icon\n  });\n  startMarkerIcon = L.icon({\n    iconUrl: \"../assets/content/images/start_marker.png\",\n    iconSize: [40, 40], // size of the icon\n  });\n  destinationIcon = L.icon({\n    iconUrl: \"../assets/content/images/destination.png\",\n    iconSize: [32, 32], // size of the icon\n  });\n\n  checkpointIcon = L.icon({\n    iconUrl: \"../assets/content/images/flag.png\",\n    iconSize: [32, 32], // size of the icon\n  });\n\n  swarmPointIcon = L.icon({\n    iconUrl: \"../assets/content/images/swarmMeetingPoint.png\",\n    iconSize: [35, 35], // size of the icon,\n    iconAnchor: [20, 30], // point of the icon which will corresponds to markers location\n  });\n\n  meetingStreet: any;\n  leavingStreet: any;\n  endTripStreet: any;\n  logText;\n  public logg: any;\n  prev;\n  overlap: boolean = false;\n  decodeRoute2: any[];\n  checkPointMarker_meet = new L.Marker();\n  checkPointMarker_meet_popup = L.popup({ autoClose: false });\n  checkPointMarker_leave = new L.Marker();\n  checkPointMarker_leave_popup = L.popup({ autoClose: false });\n\n  expected_swarmID: string;\n  expectedSwarmsArray: Array<Users> = [];\n  sortedUsersPositionwithTripID: any = []; //[{trip_id: string, userObject: any}]\n  checkpointMarkerArray = []; // contains all the checkpoint markers\n  confirmedSwarms: Swarm[] = []; // this are the confirmed swarms in the trip intersections\n  // having information about all the confirmed groups present\n\n  generatedColor = []; // keeps the track of all the color already present on the page\n\n  filteredGroupedbyCategoryList = []; // this is the list that will be expanded when there are intersections available\n  dynamicPolyline; // polyline whenever a new user selection event gets triggered\n\n  expandableList = []; // this is the content which will be visible in the expandable list\n\n  iconOrange = L.AwesomeMarkers.icon({\n    icon: \"group\",\n    markerColor: \"orange\",\n    prefix: \"fa\",\n    iconColor: \"black\",\n  });\n  icon2 = L.AwesomeMarkers.icon({\n    icon: \"group\",\n    markerColor: \"lightgray\",\n    prefix: \"fa\",\n    iconColor: \"black\",\n  });\n\n  iconOrange_deactive = L.icon({\n    iconUrl: `https://api.geoapify.com/v1/icon/?type=material&color=%23ec7b19&icon=users&iconType=awesome&scaleFactor=2&apiKey=c7ff719c2709426abb5c162d7361a78b`,\n    iconSize: [30, 40], // size of the icon\n  });\n\n  iconOrange_active = L.icon({\n    iconUrl: `https://api.geoapify.com/v1/icon/?type=material&color=%23ec7b19&icon=users&iconType=awesome&scaleFactor=2&apiKey=c7ff719c2709426abb5c162d7361a78b`,\n    iconSize: [35, 50], // size of the icon\n  });\n  leavingPointIconActive = L.icon({\n    iconUrl: `https://api.geoapify.com/v1/icon/?type=material&color=%23ec7b19&icon=users-slash&iconType=awesome&scaleFactor=2&apiKey=c7ff719c2709426abb5c162d7361a78b`,\n    iconSize: [35, 45], // size of the icon\n  });\n  leavingPointIcondeactive = L.icon({\n    iconUrl: `https://api.geoapify.com/v1/icon/?type=material&color=%23ec7b19&icon=users-slash&iconType=awesome&scaleFactor=2&apiKey=c7ff719c2709426abb5c162d7361a78b`,\n    iconSize: [30, 40], // size of the icon\n  });\n\n  openModal: boolean = false; // this variable helps to show the modal on UI\n  ShowProgressBar: boolean = true; // flag for showing progress bar\n\n  constructor(\n    private router: Router,\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public restprovider: RestApiService,\n    private alertCtrl: AlertController,\n    public modalCtrl: ModalController,\n    public device: DeviceOrientation,\n    public app: AppComponent,\n    private nativeGeocoder: NativeGeocoder,\n    private file: File,\n    private platform: Platform,\n    private transfer: TransferService,\n    private storage: StorageService,\n    private mathModel: MathematicalModel,\n    private ref: ChangeDetectorRef,\n    private globalFunction: Global\n  ) {\n    this.add_users_positions.bind(this);\n  }\n\n  ngOnInit() {\n    //load coordination sent from the homepage\n    console.log(\"ngon int called ----------------\");\n    this.ref.detectChanges();\n    console.log(\"ngonint finished call ------------------\");\n  }\n\n  ionViewWillEnter() {\n    console.log(\"start ion viewiwll enter--------------------\");\n\n    this.initalizationMain();\n    console.log(\"end ion viewiwll enter--------------------\");\n  }\n  initalizationMain() {\n    console.log(\"ionviewwillenter TripproposalsPage\");\n    // console.log(\"start position before \", this.transfer._getStartPosition());\n    this.loadCoordinates();\n    this.ShowProgressBar = true;\n    this.openModal = false;\n\n    console.log(\"start: \", this.startpoint, \"endpoint :\", this.endpoint);\n    // get trip data\n    this.restprovider\n      .getTripProposal(this.startpoint, this.endpoint)\n      .then((data: TripProposalResponse) => {\n        return (this.routes = data[\"trips\"]);\n      })\n      .catch((error) => {\n        console.log(\n          \"Error in getting trip request(500 error) :\",\n          error,\n          \"500 error\"\n        );\n      })\n      .then(() => {\n        // TODO : old code base needs to be changed later on\n        //select trip related information default trip\n        this.choosen_route_id = this.routes[0][\"trip_id\"];\n        this.choosen_route_geometry = this.routes[0].geometry;\n        this.distance[0] = this.routes[0][\"distance\"];\n        var intersections_array = this.routes[0][\"trip_intersections\"];\n        // console.log('before : ', this.routes);\n        console.log(\n          \"trip intersections with other trip id \",\n          this.routes[0][\"trip_intersections\"]\n        );\n        var sum = 0;\n        intersections_array.forEach((element, indexpts) => {\n          console.log(\"distance is \", element.distance, \"and sum is \", sum);\n          if (element.distance >= sum) {\n            this.indexpt = indexpts;\n            sum = element.distance; // sum take the longest intersection distance\n            console.log(\n              \"sum intersection distance \",\n              sum,\n              \"indexpt\",\n              this.indexpt\n            );\n          }\n        });\n\n        //define meeting and leaving points if there is an intersection\n        if (intersections_array.length == 0) {\n          this.intersection_distance = \"0\";\n        }\n\n        // here all the swarms will be shown and also the alone user\n\n        if (intersections_array.length >= 1) {\n          this.expected_swarmID = intersections_array[0].expected_swarm_id;\n          if (\n            this.expected_swarmID != null &&\n            this.expected_swarmID != \"null\" &&\n            this.expected_swarmID != undefined\n          ) {\n            console.log(\"expexcted swarm id \", this.expected_swarmID);\n          }\n          this.meetpts = this.decode(\n            intersections_array[this.indexpt][\"intersections\"][0]\n          );\n          this.meetlat = this.meetpts[0].latitude;\n          this.meetlng = this.meetpts[0].longitude;\n          console.log(\n            \"Meeting point :\",\n            \"lat\",\n            this.meetlat,\n            \"lng\",\n            this.meetlng\n          );\n          this.leavelat = this.meetpts[this.meetpts.length - 1].latitude; //gets the last latitude of the intersection\n          this.leavelng = this.meetpts[this.meetpts.length - 1].longitude; //gets the last langtitude of the intersection\n          console.log(\n            \"Leaving point :\",\n            \"lat\",\n            this.leavelat,\n            \"lng\",\n            this.leavelng\n          );\n          this.intersection_distance = sum.toString().trim().split(\".\")[0];\n        }\n        //decode the trip and get the ending point\n        this.decodeRoute = this.decode(this.routes[0][\"geometry\"]);\n        // console.log('decode the trip', this.decodeRoute);\n        this.lastPointRoute = this.decodeRoute[this.decodeRoute.length - 1];\n        // console.log(\"intersections array\", intersections_array);\n        // console.log(\"intersection_distance\", this.intersection_distance);\n        if (this.platform.is(\"android\")) {\n          this.reverseGeocode(this.meetlat, this.meetlng, 1);\n          this.reverseGeocode(this.leavelat, this.leavelng, 2);\n          this.reverseGeocode(\n            this.lastPointRoute.latitude,\n            this.lastPointRoute.longitude,\n            3\n          );\n        }\n      })\n      .then(() => {\n        // initialization of each and every swarm and alone user\n        this.expectedSwarmsArray = [];\n        // everything related to swar information will be gathered and implemented here\n      })\n      .then(() => {\n        return Promise.all(\n          this.routes.map((element) => {\n            console.log(\"Routes are \", element);\n            return element;\n          })\n        );\n      })\n      .then((elem: Trip[]) => {\n        console.log(\"Element is \", elem);\n\n        // initialization of each and every swarm and alone user\n        this.expectedSwarmsArray = [];\n        // goal is to build each and every single individual dataset\n        return Promise.all(\n          // this is for the different routes\n          elem.map((element: Trip) => {\n            let obj: Users;\n            let dataArray = [];\n            if (element.trip_intersections.length != 0) {\n              console.log(\n                \"trip intersection found \",\n                element.trip_intersections\n              );\n              return Promise.all(\n                element.trip_intersections.map((element3: TripIntersection) => {\n                  console.log(\"trip intersection for elementid:\", element3);\n                  return this.restprovider\n                    .getTripintersection(element3.trip_intersection_id, true)\n                    .then((data_tripIntersection) => {\n                      console.log(\n                        \"response trip intersection\",\n                        data_tripIntersection\n                      );\n                      return this.restprovider\n                        .getUserlocation(\n                          element3.foreign_trip_id,\n                          data_tripIntersection.users[0].device_id\n                        )\n                        .then(\n                          (data: GetUserLocation) => {\n                            console.log(\n                              \"data from the trip intersections \",\n                              data\n                            );\n                            let obj_list = {\n                              ...data,\n                              foreign_trip_id: element3.foreign_trip_id,\n                            };\n                            dataArray.push(obj_list);\n                            let element2 = data;\n                            obj = {\n                              trip_id: element.trip_id,\n                              trip_id_geometry: element.geometry,\n                              device_id: element2.device_id,\n                              foreign_trip_id: element3.foreign_trip_id,\n                              swarm_id: element3.expected_swarm_id,\n                              intersection_distance: element3.distance\n                                .toString()\n                                .trim()\n                                .split(\".\")[0],\n                              intersection_geometry: element3.intersections[0],\n                              position: element2.position,\n                              speed: element2.speed,\n                            };\n                            obj.color = this.globalFunction.generateColor();\n                            let overlap = this.decode(\n                              element3.intersections[0]\n                            );\n                            var coordinates = overlap.map(\n                              (waypoint) =>\n                                new L.LatLng(\n                                  waypoint.latitude,\n                                  waypoint.longitude\n                                )\n                            );\n                            obj.intersection_polyline_LatLngs = coordinates;\n\n                            console.log(\"new obj final\", obj);\n\n                            return obj;\n                          },\n                          (error) => {\n                            console.error(\"Error getting user location\", error);\n                          }\n                        );\n                    });\n                })\n              )\n                .then(\n                  (array) => {\n                    console.error(\"value is \", array);\n                    console.log(\"dataarray\", dataArray);\n                    this.sortedUsersPositionwithTripID.push({\n                      trip_id: element.trip_id,\n                      userObject: dataArray,\n                    });\n                    return Promise.all(\n                      array.map((obj: any) => {\n                        console.warn(\"get trips mapping\", obj);\n                        return this.restprovider\n                          .getTrips(obj.foreign_trip_id)\n                          .then((tripData: GetTripsResponse) => {\n                            console.log(\"calling rest trip\", obj);\n                            obj.foreign_trip_id_geometry = tripData.geometry;\n                            obj.foreign_trip_id_geometry;\n                            this.expectedSwarmsArray.push(obj);\n                            console.log(\n                              \"nextfinal push \",\n                              this.expectedSwarmsArray\n                            );\n                            return obj;\n                          });\n                      })\n                    );\n                  },\n                  (error) => {\n                    console.error(error);\n                  }\n                )\n                .then((val) => {\n                  console.error(\"new val is\", val);\n                  return val;\n                });\n            }\n          })\n        );\n      })\n      .then((x) => {\n        console.log(\"nextfinal x \", x);\n\n        // this.expectedSwarmsArray= x\n        console.log(\"nextfinal swarmArray\", this.expectedSwarmsArray);\n        return x;\n      })\n      .then((array) => {\n        // ? for now the calls will be done only once but an interval can be set here to call the whole then block\n        // ! this.PotentialSwarmLocationUpdateInterval = setInterval(async () => {}\n\n        if (this.expectedSwarmsArray.length != 0) {\n          return Promise.all(\n            this.expectedSwarmsArray.map((element) => {\n              console.log(\"calculating\", element);\n              this.openModal = true;\n\n              // ? considered all the information in the interface is available\n              //  ! add all the error handler for all the user cases of\n              // this is the calculation check for static model\n              // calculate distance for the expexcted swarm\n              var distanceToCover_forSwarm =\n                this.mathModel.getDistanceWithBreakpoint(\n                  this.decode(element.foreign_trip_id_geometry),\n                  {\n                    latitude: element.position.lat,\n                    longitude: element.position.lng,\n                  },\n                  this.decode(element.intersection_geometry)[0]\n                );\n              let overlap = this.decode(element.intersection_geometry);\n              var coordinates = overlap.map(\n                (waypoint) =>\n                  new L.LatLng(waypoint.latitude, waypoint.longitude)\n              );\n              element.intersection_polyline_LatLngs = coordinates;\n              element.swarm_distanceToCover = distanceToCover_forSwarm;\n              // calculate distance for the user\n              var distanceToCover_forUser =\n                this.mathModel.getDistanceWithBreakpoint(\n                  this.decode(element.trip_id_geometry),\n                  {\n                    latitude: this.startpoint.lat,\n                    longitude: this.startpoint.lng,\n                  },\n                  this.decode(element.intersection_geometry)[0]\n                );\n              element.user_distanceToCover = distanceToCover_forUser;\n              // calculate Time required to reach swarm\n              var ETA_forExpectedSwarm = this.mathModel.calculateETADynamic(\n                distanceToCover_forSwarm,\n                element.speed\n              );\n\n              var length = this.decode(element.intersection_geometry).length;\n              let leavingpoint_distance =\n                this.mathModel.getDistanceWithBreakpoint(\n                  this.decode(element.trip_id_geometry),\n                  {\n                    latitude: this.startpoint.lat,\n                    longitude: this.startpoint.lng,\n                  },\n                  this.decode(element.intersection_geometry)[length - 1]\n                );\n              element.user_distance_to_leaving_point = leavingpoint_distance;\n\n              element.ETA_swarm = ETA_forExpectedSwarm;\n              var ETA_forUser = this.mathModel.calculateETAStatic(\n                distanceToCover_forUser\n              );\n              element.ETA_user = ETA_forUser;\n              element.isAbleToMakeSwarm = this.mathModel.tripproposals_criteria(\n                ETA_forUser,\n                ETA_forExpectedSwarm\n              );\n              let recommended_speed = this.mathModel.calculateSuggestedSpeed(\n                distanceToCover_forUser,\n                ETA_forExpectedSwarm\n              );\n              element.suggestedSpeed = recommended_speed;\n              element.isAbleToMakeSwarm;\n\n              this.refreshMarkerPopup();\n              setTimeout(() => {\n                this.ShowProgressBar = false;\n              }, 1000);\n              return element;\n            })\n          );\n        } else {\n          // no intersection available\n          this.ShowProgressBar = false;\n          this.openModal = false;\n          this.modal.dismiss(null, \"cancel\").then(\n            (data) => {\n              console.log(\"modal successfully dismissed\");\n            },\n            (error) => {\n              console.error(\"Error dismissing the modal\", error);\n            }\n          );\n        }\n      })\n      .then((x) => {\n        console.log(\"nextfinal after interval\", x);\n        return this.expectedSwarmsArray;\n      })\n      .then((array) => {\n        if (array.length == 0) {\n          console.log(\"skipping 2\");\n          return;\n        }\n        console.log(\"nextfinal return array\", array);\n        console.log(\"nextfinal expected swarm\", this.expectedSwarmsArray);\n        return (\n          Promise.all(\n            this.expectedSwarmsArray.map((group, product) => {\n              console.log(group, product);\n            })\n          )\n\n            /**\n             * @depreceated\n             * @alternative new function is being used in new version\n             */\n            // ! no in use anymore\n            .then((array) => {\n              console.log(array);\n              if (array.includes(undefined)) {\n                return;\n              }\n              let groupByCategory1: any = array.reduce(\n                (group, product: any) => {\n                  console.log(\"nextfinal \", \"inside reduce\");\n                  const { trip_id } = product;\n                  group[trip_id] = group[trip_id] ?? [];\n                  group[trip_id].push(product);\n                  console.log(\"nextfinal\", group, product);\n                  return group;\n                },\n                {}\n              );\n\n              console.log(\n                \"nextfinal groupbyCategory1 in reduce \",\n                groupByCategory1\n              );\n\n              Object.entries(groupByCategory1).forEach((entry: any) => {\n                const [key, value] = entry;\n                console.log(key, value);\n                const groupByCategory2 = value.reduce((group, product) => {\n                  const { swarm_id } = product;\n                  group[swarm_id] = group[swarm_id] ?? [];\n                  group[swarm_id].push(product);\n                  // console.log(\"nextfinalcheck\", groupByCategory1[key])\n\n                  return group;\n                }, {});\n                groupByCategory1[key] = groupByCategory2;\n                console.log(\"nextfinalized\", groupByCategory1);\n              });\n\n              this.filteredGroupedbyCategoryList = groupByCategory1;\n              console.log(\n                \"nextfinalexpanded list\",\n                this.filteredGroupedbyCategoryList\n              );\n\n              return this.filteredGroupedbyCategoryList;\n            })\n        );\n      })\n      .then((filteredList) => {\n        console.log(\"filtered list\", filteredList);\n        console.log(\"routes for map :\", this.routes);\n      })\n      .catch((error) => {\n        console.error(\"error generated generating sorted lists \", error);\n      })\n      .then(() => {})\n      .catch((error) => {\n        console.error(\"Error generating checkpoint flags \");\n      })\n      .then(() => {\n        //get the navigation\n        this.steps = this.routes[0][\"legs\"][0][\"steps\"];\n        this.transfer._setNavSteps(this.steps);\n        console.log(\"steps are \", this.steps);\n        this.groupList(this.expectedSwarmsArray);\n        this.loadmap(this.routes);\n      })\n      .catch((error) => {\n        console.log(\"Error bar in ngOnInit\", error);\n        this.logText =\n          this.logText +\n          new Date().toISOString().substring(11, 19) +\n          \" Error loading page: \" +\n          error +\n          \"\\r\\n\";\n        this.file.writeFile(\n          this.file.externalApplicationStorageDirectory,\n          this.app.filename,\n          this.logText,\n          { append: true }\n        );\n      });\n    if (this.platform.is(\"android\")) {\n      this.writeLogs();\n    }\n  }\n\n  ionViewDidEnter() {}\n  groupList(array) {\n    console.log(\"nextfinal grouplist function\", array);\n    let groupByCategory1: any = array.reduce((group, product: any) => {\n      console.log(\"nextfinal \", \"inside reduce\");\n      const { trip_id } = product;\n      group[trip_id] = group[trip_id] ?? [];\n      group[trip_id].push(product);\n      console.log(\"nextfinal\", group, product);\n      return group;\n    }, {});\n\n    console.log(\"nextfinal groupbyCategory1 \", groupByCategory1);\n\n    Object.entries(groupByCategory1).forEach((entry: any) => {\n      const [key, value] = entry;\n      console.log(key, value);\n      const groupByCategory2 = value.reduce((group, product) => {\n        const { swarm_id } = product;\n        group[swarm_id] = group[swarm_id] ?? [];\n        group[swarm_id].push(product);\n        // console.log(\"nextfinalcheck\", groupByCategory1[key])\n\n        return group;\n      }, {});\n      groupByCategory1[key] = groupByCategory2;\n      console.log(\"nextfinalized\", groupByCategory1);\n    });\n\n    this.filteredGroupedbyCategoryList = groupByCategory1;\n    console.log(\n      \"nextfinalexpanded list in function \",\n      this.filteredGroupedbyCategoryList\n    );\n  }\n\n  ionViewWillLeave() {\n    console.log(\"ionviewDid will leave  proposal\");\n    this.modal.dismiss(null, \"cancel\").then(\n      (data) => {\n        console.log(\"modal successfully dismissed\");\n      },\n      (error) => {\n        console.error(\"Error dismissing the modal\", error);\n      }\n    );\n    if (this.map2) {\n      this.map2.off();\n      this.map2.remove();\n      this.checkpointMarkerArray.forEach((marker) => {\n        marker.remove();\n      });\n    }\n    clearInterval(this.PotentialSwarmLocationUpdateInterval);\n  }\n\n  ionViewDidLeave() {\n    this.transfer.flag.next(\"true\");\n    this.sortedUsersPositionwithTripID = [];\n    console.log(\"--------tripproposal implementation finished----------\");\n  }\n  reload() {\n    //document.getElementById(\"map\").outerHTML = \"\";\n    console.log(\"just enetered reload function\");\n  }\n\n  exit() {\n    this.popup = false;\n    this.choosen_route_id = null;\n    this.intersection_distance = \"0\";\n  }\n  /**\n   * loads all necessary variables for trip proposal from transfers\n   */\n  loadCoordinates() {\n    try {\n      this.startLat = this.transfer._getStartPosition().lat;\n      this.startLng = this.transfer._getStartPosition().lng;\n      this.startpoint.lat = this.startLat;\n      this.startpoint.lng = this.startLng;\n      this.endLat = this.transfer._getDestinationPosition().lat;\n      this.endLng = this.transfer._getDestinationPosition().lng;\n      this.endpoint.lat = this.endLat;\n      this.endpoint.lng = this.endLng;\n      this.prev = this.transfer._getPreviousLog();\n      this.logText = this.transfer._getLogText();\n    } catch (error) {\n      console.warn(\"error loading coordinates from transfer  \", error);\n      console.error(\"error=>\", error);\n      this.backward();\n    } finally {\n      console.log(\"tried loading coordinates\");\n    }\n\n    console.log(\n      \"using services transfer:\",\n      this.startpoint,\n      \"and endpoint is \",\n      this.endpoint\n    );\n\n    console.log(\"finsihed with initialization\");\n    this.logText =\n      this.logText +\n      new Date().toISOString().substring(11, 19) +\n      \" Trip proposals page entered\" +\n      \"\\r\\n\";\n    if (this.platform.is(\"android\")) {\n      this.file.writeFile(\n        this.file.externalApplicationStorageDirectory,\n        this.app.filename,\n        this.logText,\n        { append: true }\n      );\n    }\n  }\n\n  /**\n   * @depreceated should not be used due to data Privacy\n   *\n   * As the marker feature of the users depreaceated in tripproposal page\n   * these creates logos for all the users having trip intersection with your own trip\n   */\n\n  createLogo() {\n    let arr = this.expectedSwarmsArray;\n    arr.forEach((element) => {\n      console.log(\"create logo\", element);\n      let marker = new L.Marker();\n      // this is users location\n      marker.setIcon(this.swarmIcon);\n      marker.setLatLng([element.position.lat, element.position.lng]);\n      marker.addTo(this.map2);\n    });\n  }\n  /**\n   * creates map with all marker and polyline\n   * @param fake_trips routes information from trip proposal\n   */\n  loadmap(fake_trips) {\n    console.log(\"fake trip\", fake_trips);\n    this.map2 = L.map(\"map_tripproposals\").setView([52.520008, 13.404954], 14);\n    L.tileLayer(\"http://{s}.tile.osm.org/{z}/{x}/{y}.png\", {}).addTo(this.map2);\n    // load map\n    // if condition is to check for two alternative routes\n    this.updateExpandableList();\n    console.log(\"nextfinalchoosen\", this.expandableList);\n\n    if (fake_trips.length - 1 != 0) {\n      // assigning expandable content\n\n      // ? here try to add the polyline\n      this.decodedPolyline = this.decode(this.routes[1].geometry);\n      // console.log(\"XXXXXXXXXXXXXXXXXX\");\n      console.log(this.decodedPolyline);\n      var coordinates = this.decodedPolyline.map(\n        (waypoint) => new L.LatLng(waypoint.latitude, waypoint.longitude)\n      );\n      // console.log(\"coord\", coordinates);\n      let polyline = L.polyline(coordinates, {\n        color: \"grey\",\n        weight: 10,\n        opacity: 0.9,\n        lineJoin: \"round\",\n        //  dashArray: \"0 15\",\n      }).bindPopup(\"number 1\");\n      // select another alternative route\n      this.decodedPolyline2 = this.decode(this.routes[0].geometry);\n      // console.log(\"decode 2 \", this.decodedPolyline2);\n      var coordinates2 = this.decodedPolyline2.map(\n        (waypoint) => new L.LatLng(waypoint.latitude, waypoint.longitude)\n      );\n      let polyline2 = L.polyline(coordinates2, {\n        color: \"blue\",\n        weight: 10,\n        opacity: 0.9,\n        lineJoin: \"round\",\n        //  dashArray: \"0 15\",\n      })\n        .bindPopup(\"number 2\")\n        .openPopup();\n      polyline.addTo(this.map2);\n      polyline2.addTo(this.map2);\n\n      this.map2.fitBounds(polyline2.getBounds());\n      //add markers to the map\n      this.marker = new L.Marker();\n      this.marker.setIcon(this.startMarkerIcon);\n      this.marker.setLatLng([this.startpoint.lat, this.startpoint.lng]);\n      this.marker.addTo(this.map2);\n      this.map2\n        .locate({ setView: false, watch: true, enableHighAccuracy: true })\n        .on(\n          \"locationfound\",\n          function (e) {\n            // ! function changed to stop updating the current location of the user for testing purpose\n\n            this.marker.setLatLng([this.startpoint.lat, this.startpoint.lng]);\n            this.marker.addTo(this.map2);\n\n            this.marker.setLatLng(e.latlng);\n            this.marker.addTo(this.map2);\n            this.startpoint.lat = e.latlng.lat;\n            this.startpoint.lng = e.latlng.lng;\n          },\n          this\n        );\n      L.marker([this.endpoint.lat, this.endpoint.lng], {\n        icon: this.destinationIcon,\n      }).addTo(this.map2);\n\n      this.draw();\n      this.createCheckpoints();\n\n      polyline.on(\"click\", (e) => {\n        this.overlap = true;\n        this.map2.removeLayer(polyline2);\n        this.map2.removeLayer(polyline);\n        polyline2.addTo(this.map2);\n        polyline.addTo(this.map2);\n        polyline.setStyle({\n          color: \"blue\",\n        });\n        polyline2.setStyle({\n          color: \"grey\",\n        });\n        this.popup = true;\n        this.choosen_route_id = this.routes[1][\"trip_id\"];\n        this.choosen_route_geometry = this.routes[1].geometry;\n        this.updateExpandableList();\n        this.distance[0] = this.routes[1][\"distance\"];\n        var intersections_array = this.routes[1][\"trip_intersections\"];\n        console.log(\"route[1]\", intersections_array);\n        var sum = 0;\n        if (intersections_array.length == 0) {\n          this.intersection_distance = \"0\";\n        }\n\n        intersections_array.forEach((element, indexpts) => {\n          console.log(\"-----------------route[1]\", element);\n          if (element.distance >= sum) {\n            this.indexpt = indexpts;\n            sum = element.distance; // sum take the longest intersection distance\n            this.intersection_distance = sum.toString().trim().split(\".\")[0];\n            console.log(\n              \"index\",\n              this.indexpt,\n              \"intersections_array\",\n              intersections_array,\n              \"intersection distance\",\n              this.intersection_distance\n            );\n            this.meetpts = this.decode(\n              intersections_array[this.indexpt][\"intersections\"][0]\n            );\n            this.meetlat = this.meetpts[0].latitude;\n            this.meetlng = this.meetpts[0].longitude;\n            this.leavelat = this.meetpts[this.meetpts.length - 1].latitude; //gets the last latitude of the intersection\n            this.leavelng = this.meetpts[this.meetpts.length - 1].longitude; //gets the last langtitude of the intersection\n          }\n        });\n\n        this.draw();\n        this.createCheckpoints();\n      });\n      // route[0]\n      polyline2.on(\n        \"click\",\n        (e) => {\n          this.overlap = false;\n          this.map2.removeLayer(polyline);\n          this.map2.removeLayer(polyline2);\n          polyline.addTo(this.map2);\n          polyline2.addTo(this.map2);\n          polyline.setStyle({\n            color: \"grey\",\n          });\n          polyline2.setStyle({\n            color: \"blue\",\n          });\n          this.popup = true;\n          this.choosen_route_id = this.routes[0][\"trip_id\"];\n          this.choosen_route_geometry = this.routes[0].geometry;\n          this.distance[0] = this.routes[0][\"distance\"];\n          this.updateExpandableList();\n          var intersections_array = this.routes[0][\"trip_intersections\"];\n          console.log(\"route[0]\", intersections_array);\n          var sum = 0;\n          if (intersections_array.length == 0) {\n            this.intersection_distance = \"0\";\n          }\n          intersections_array.forEach((element, indexpts) => {\n            console.log(\"-----------------route[0]\", element);\n            if (element.distance >= sum) {\n              this.indexpt = indexpts;\n              sum = element.distance; // sum take the longest intersection distance\n              this.intersection_distance = sum.toString().trim().split(\".\")[0];\n              this.meetpts = this.decode(\n                intersections_array[this.indexpt][\"intersections\"][0]\n              );\n              console.log(\"intersection distance\", this.intersection_distance);\n              this.meetlat = this.meetpts[0].latitude;\n              this.meetlng = this.meetpts[0].longitude;\n              this.leavelat = this.meetpts[this.meetpts.length - 1].latitude; //gets the last latitude of the intersection\n              this.leavelng = this.meetpts[this.meetpts.length - 1].longitude; //gets the last langtitude of the intersection\n            }\n          });\n\n          this.draw();\n          this.createCheckpoints();\n        },\n        this\n      );\n    } else {\n      // this is for only one route\n      this.decodedPolyline2 = this.decode(this.routes[0].geometry);\n      var coordinates2 = this.decodedPolyline2.map(\n        (waypoint) => new L.LatLng(waypoint.latitude, waypoint.longitude)\n      );\n      let polyline2 = L.polyline(coordinates2, {\n        color: \"blue\",\n        weight: 10,\n        opacity: 0.9,\n        lineJoin: \"round\",\n      }).bindPopup(\"1 n only 1 \");\n      polyline2.addTo(this.map2);\n\n      this.map2.fitBounds(polyline2.getBounds());\n      //add markers to the map\n\n      this.marker = new L.Marker();\n      this.marker.setIcon(this.startMarkerIcon);\n      this.marker.setLatLng([this.startpoint.lat, this.startpoint.lng]);\n      this.marker.addTo(this.map2);\n      this.map2\n        .locate({ setView: false, watch: true, enableHighAccuracy: true })\n        .on(\n          \"locationfound\",\n          function (e) {\n            this.marker.setLatLng(e.latlng);\n            this.marker.addTo(this.map2);\n            this.startpoint.lat = e.latlng.lat;\n            this.startpoint.lng = e.latlng.lng;\n          },\n          this\n        );\n      L.marker([this.endpoint.lat, this.endpoint.lng], {\n        icon: this.destinationIcon,\n      }).addTo(this.map2);\n      this.draw();\n    }\n\n    console.log(\"tryinggggg\", this.expectedSwarmsArray);\n    // console.log(this.expectedSwarmsArray)\n    this.map2.on(\"click\", (e) => {\n      if (this.expandableList.length != 0) {\n        this.modal.setCurrentBreakpoint(0.05);\n      }\n    });\n\n    this.createCheckpoints();\n  }\n  /**\n   *  @returns {void} generates marker for the map, meeting and leaving points\n   * this functions generates checkpoint markers for the trips and their intersection\n   */\n  createCheckpoints() {\n    let arr = this.expectedSwarmsArray;\n    console.log(\"creating markers \", this.choosen_route_id);\n    if (this.checkpointMarkerArray.length != 0) {\n      this.deleteCheckpointsMarker();\n    }\n\n    // console.log(\"marker should be available here \", this.decode(arr[0].intersection_geometry)[0])\n    setTimeout(() => {\n      arr.forEach((element) => {\n        console.log(\"create markers\", element);\n        console.log(\n          \"creating markers \",\n          element.trip_id,\n          this.choosen_route,\n          element.trip_id == this.choosen_route_id\n        );\n\n        if (element.trip_id == this.choosen_route_id) {\n          let marker = new L.Marker();\n\n          marker.options.iconSize = [50, 50];\n          marker.setIcon(this.iconOrange_deactive);\n          let decodedArray = this.decode(element.intersection_geometry);\n          let a = decodedArray[0];\n\n          marker.setLatLng([a.latitude, a.longitude]);\n          marker.on(\n            \"click\",\n            async function () {\n              console.log(\"marker clicked\", element);\n              this.selectCheckpoint(element, \"meeting\");\n            },\n            this\n          );\n\n          // setting leaving marker coordinates\n          let leaveMarker = new L.Marker();\n\n          let b = decodedArray[decodedArray.length - 1];\n\n          leaveMarker.setIcon(this.leavingPointIcondeactive);\n          leaveMarker.setLatLng([b.latitude, b.longitude]);\n          leaveMarker.addTo(this.map2);\n          leaveMarker.on(\n            \"click\",\n            async function () {\n              console.log(\"marker clicked\", element);\n              this.selectCheckpoint(element, \"leaving\");\n            },\n            this\n          );\n\n          /* marker.bindPopup(\"Loading....\", {\n            closeButton: false,\n            className: \"checkpointPopUp\",\n          }); */\n          marker.addTo(this.map2);\n          // TODO : add estimated time and color for the icon\n          // marker.bindPopup()\n          element.checkpointMarker = marker;\n          element.checkpointMarker;\n          this.checkpointMarkerArray.push(marker);\n          element.leavingMarker = leaveMarker;\n          this.checkpointMarkerArray.push(leaveMarker);\n          // this.createLogo();\n        }\n      });\n    }, 150);\n  }\n  // delete all ther present markers\n  deleteCheckpointsMarker() {\n    this.checkpointMarkerArray.forEach((marker) => {\n      marker.remove();\n    });\n  }\n\n  refreshMarkerPopup() {\n    let array = this.expectedSwarmsArray;\n    array.forEach((element) => {\n      let marker = element.checkpointMarker;\n      if (marker) {\n        let a = marker.getPopup().getContent();\n        if (a !== element.isAbleToMakeSwarm) {\n          let reachable = \"\";\n          if (element.isAbleToMakeSwarm) {\n            reachable = \"Yes\";\n          } else {\n            reachable = \"No\";\n          }\n          let recommended_speed = this.mathModel.calculateSuggestedSpeed(\n            element.user_distanceToCover,\n            element.ETA_swarm\n          );\n          recommended_speed *= 3.6;\n\n          // let ETA_toCheckpoint = element.c\n          let popupContent =\n            \"<div background-color ='black'>Reachable :\" +\n            reachable +\n            \"<br/>\" +\n            \"Distance to checkpoint: \" +\n            element.user_distanceToCover +\n            \" m\" +\n            \"</br>\" +\n            \"ETA :\" +\n            element.ETA_user +\n            \" sec\" +\n            \"<br/>\" +\n            \"Recommended Speed \" +\n            Math.round(recommended_speed * 10) / 10 +\n            \" km/hr\" +\n            \"</div>\";\n          marker.getPopup().setContent(popupContent);\n          marker.getPopup().update();\n        }\n      }\n    });\n  }\n  refreshTripProposal() {\n    console.log(\"refresh tripproposal clicked \");\n    if (this.map2) {\n      this.map2.stopLocate();\n      this.map2.off();\n      this.map2.remove();\n    }\n    if (\n      this.startpoint.lat &&\n      this.startpoint.lng &&\n      this.startpoint.lat != null &&\n      this.startpoint.lat != undefined &&\n      this.startpoint.lng != null &&\n      this.startpoint.lng != undefined\n    ) {\n      this.transfer._setStartPosition(this.startpoint);\n      setTimeout(() => {\n        this.ionViewWillEnter();\n      }, 1000);\n    } else {\n      // !here comes one alert box\n    }\n  }\n  /**\n   * generates polyline on the map\n   */\n  draw() {\n    //draw the intersection\n    let polyline1;\n    console.log(\"overlap\", this.overlap);\n\n    if (this.overlap == false) {\n      console.log(\"inside route 0\");\n\n      if (this.routes[0][\"trip_intersections\"].length != 0) {\n        var a =\n          this.routes[0][\"trip_intersections\"][this.indexpt][\"intersections\"];\n        this.decodedPolyline3 = this.decode(a[0]);\n\n        var coordinates1 = this.decodedPolyline3.map(\n          (waypoint) => new L.LatLng(waypoint.latitude, waypoint.longitude)\n        );\n\n        polyline1 = L.polyline(coordinates1, {\n          color: \"green\",\n          weight: 8,\n          opacity: 0.8,\n          lineJoin: \"round\",\n        });\n        polyline1.addTo(this.map2);\n        if (this.meetlat && this.meetlng) {\n          console.log(\"creating marker\");\n          this.checkPointMarker_meet.setIcon(this.checkpointIcon);\n          this.checkPointMarker_meet.setLatLng([this.meetlat, this.meetlng]);\n          //this.checkPointMarker_meet.addTo(this.map2);\n          this.reverseGeocode(this.meetlat, this.meetlng, 1);\n          console.log(\"meeting street\", this.meetingStreet);\n          setTimeout(() => {\n            this.checkPointMarker_meet_popup.setContent(this.meetingStreet);\n            this.checkPointMarker_meet.bindPopup(\n              this.checkPointMarker_meet_popup\n            );\n            this.checkPointMarker_meet.openPopup();\n          }, 500);\n        }\n\n        if (this.leavelat && this.leavelng) {\n          this.checkPointMarker_leave.setIcon(this.checkpointIcon);\n          this.checkPointMarker_leave.setLatLng([this.leavelat, this.leavelng]);\n          //this.checkPointMarker_leave.addTo(this.map2);\n          this.reverseGeocode(this.leavelat, this.leavelng, 2);\n          console.log(\"leaving street\", this.leavingStreet);\n          setTimeout(() => {\n            this.checkPointMarker_leave.bindPopup(this.leavingStreet);\n            this.checkPointMarker_leave.openPopup();\n          }, 500);\n        }\n      } else {\n        if (this.map2.hasLayer(this.checkPointMarker_meet)) {\n          console.log(\"trying to remove meet flag route [0] \");\n          this.checkPointMarker_meet.remove();\n        }\n        if (this.map2.hasLayer(this.checkPointMarker_leave)) {\n          this.checkPointMarker_leave.remove();\n        }\n      }\n    } else if (this.overlap == true) {\n      console.log(\"inside route 1\");\n      if (this.routes[1][\"trip_intersections\"].length != 0) {\n        var a =\n          this.routes[1][\"trip_intersections\"][this.indexpt][\"intersections\"];\n\n        this.decodedPolyline = this.decode(a[0]);\n\n        var coordinates2 = this.decodedPolyline.map(\n          (waypoint) => new L.LatLng(waypoint.latitude, waypoint.longitude)\n        );\n        polyline1 = L.polyline(coordinates2, {\n          color: \"green\",\n          weight: 8,\n          opacity: 0.8,\n          lineJoin: \"round\",\n        });\n        polyline1.addTo(this.map2);\n        if (this.meetlat && this.meetlng) {\n          this.checkPointMarker_meet.setIcon(this.checkpointIcon);\n          this.checkPointMarker_meet.setLatLng([this.meetlat, this.meetlng]);\n          this.checkPointMarker_meet.addTo(this.map2);\n          this.reverseGeocode(this.meetlat, this.meetlng, 1);\n          console.log(\"meeting street\", this.meetingStreet);\n          setTimeout(() => {\n            this.checkPointMarker_meet.bindPopup(this.meetingStreet);\n            this.checkPointMarker_meet.openPopup();\n          }, 500);\n        }\n\n        if (this.leavelat && this.leavelng) {\n          this.checkPointMarker_leave.setIcon(this.checkpointIcon);\n          this.checkPointMarker_leave.setLatLng([this.leavelat, this.leavelng]);\n          this.checkPointMarker_leave.addTo(this.map2);\n          this.reverseGeocode(this.leavelat, this.leavelng, 2);\n          console.log(\"leaving street\", this.leavingStreet);\n          setTimeout(() => {\n            this.checkPointMarker_leave.bindPopup(this.leavingStreet);\n            this.checkPointMarker_leave.openPopup();\n          }, 700);\n        }\n      } else {\n        if (this.map2.hasLayer(this.checkPointMarker_meet)) {\n          this.checkPointMarker_meet.remove();\n        }\n        if (this.map2.hasLayer(this.checkPointMarker_leave)) {\n          this.checkPointMarker_leave.remove();\n        }\n      }\n    }\n  }\n  /**\n   * returns street name for a particular geocordinate\n   * @param lat latitude\n   * @param lng longitude\n   * @param street {differentiate between meeting and leaving checkpoint }\n   */\n  reverseGeocode(lat, lng, street) {\n    if (this.platform.is(\"android\") && lat != undefined && lng != undefined) {\n      console.log(\"reverse android called \", lat, lng, street);\n      let options: NativeGeocoderOptions = {\n        useLocale: true,\n        maxResults: 2,\n        defaultLocale: \"de_DE\",\n      };\n      try {\n        this.nativeGeocoder.reverseGeocode(lat, lng, options).then(\n          (result) => {\n            console.log(\"result from reverse geocode\", result);\n            if (street == 1) {\n              if (result[0].thoroughfare == \"\") {\n                this.meetingStreet =\n                  result[1].thoroughfare + \" \" + result[1].subThoroughfare;\n                console.log(\n                  \"called revergeocode :\",\n                  \" street option\",\n                  street,\n                  \"name of meeting street is :\",\n                  this.meetingStreet\n                );\n              } else {\n                this.meetingStreet =\n                  result[0].thoroughfare + \" \" + result[0].subThoroughfare;\n                console.log(\n                  \"called revergeocode :\",\n                  \" street option\",\n                  street,\n                  \"name of meeting street is :\",\n                  this.meetingStreet\n                );\n              }\n            }\n            if (street == 2) {\n              if (result[0].thoroughfare == \"\") {\n                this.leavingStreet =\n                  result[1].thoroughfare + \" \" + result[1].subThoroughfare;\n                console.log(\n                  \"called revergeocode :\",\n                  \" street option\",\n                  street,\n                  \"name of meeting street is :\",\n                  this.leavingStreet\n                );\n              } else {\n                this.leavingStreet =\n                  result[0].thoroughfare + \" \" + result[0].subThoroughfare;\n                console.log(\n                  \"called revergeocode :\",\n                  \" street option\",\n                  street,\n                  \"name of meeting street is :\",\n                  this.leavingStreet\n                );\n              }\n            }\n            if (street == 3) {\n              if (result[0].thoroughfare == \"\") {\n                this.endTripStreet =\n                  result[1].thoroughfare + \" \" + result[1].subThoroughfare;\n              } else {\n                this.endTripStreet =\n                  result[0].thoroughfare + \" \" + result[0].subThoroughfare;\n              }\n              this.transfer._setEndTripStreet(this.endTripStreet);\n            }\n          },\n          (error) => {\n            // this.present_alert_Json();\n            console.log(\"reversegeocode error\", error);\n\n            this.logText =\n              this.logText +\n              new Date().toISOString().substring(11, 19) +\n              \" error generating reversegeocode failed to add\" +\n              error +\n              \"\\r\\n\";\n            this.file.writeFile(\n              this.file.externalApplicationStorageDirectory,\n              this.app.filename,\n              this.logText,\n              { append: true }\n            );\n          }\n        );\n      } catch (e) {\n        console.log(\n          \"ERROR generating reverse geocode for :\",\n          lat,\n          lng,\n          \"error\",\n          e\n        );\n      } finally {\n        console.log(\"reverse finally finished\");\n      }\n    }\n  }\n\n  async present_alert_Json() {\n    console.log(\"Present alert called trippsorposals\");\n\n    let alert = this.alertCtrl.create({\n      header: \"Error \",\n      subHeader:\n        \"Error with your geolocation. Please redirect back to the home screen\",\n      buttons: [\n        {\n          text: \"Back\",\n          handler: () => {\n            console.log(\"Json error , redirecting to home screen\");\n            this.navCtrl.navigateRoot([\"/home\"]);\n            this.app.initializeApp();\n          },\n        },\n      ],\n    });\n    (await alert).present();\n    setTimeout(async () => {\n      (await alert).dismiss();\n      this.navCtrl.navigateRoot([\"/home\"]);\n    }, 3000);\n  }\n\n  /**\n   * activates the trip in backend\n   * and forward to the trips page\n   */\n  update_user() {\n    console.log(\"Go to trips button clicked\");\n    this.storage.set(\"last_trip_deleted_successfully\", false);\n\n    this.restprovider\n      .putTrips(this.choosen_route_id, \"active\")\n      .then(\n        (data) => {\n          console.log(\"trip acivated\", data);\n        },\n        (error) => {\n          console.log(\"error activating trip\", error);\n        }\n      )\n\n      .then(\n        () => {\n          // sends required information to the trips page\n          this.forward();\n        },\n        (error) => {\n          console.log(\n            \"error caught while moving from proposal page to trip page\"\n          );\n        }\n      )\n      .catch((error) => {\n        console.log(\"error catch while forwarding to trips\", error);\n        this.logText =\n          this.logText +\n          new Date().toISOString().substring(11, 19) +\n          \" Error: \" +\n          error +\n          \"\\r\\n\";\n        this.file.writeFile(\n          this.file.externalApplicationStorageDirectory,\n          this.app.filename,\n          this.logText,\n          { append: true }\n        );\n      });\n  }\n\n  /**\n   * @deprecated not in use anymore\n   */\n  add_users_positions() {\n    console.log(\"add_user_positions() called \");\n    this.users_positions.forEach((item) => {\n      console.log(\"each user position\", item);\n      var marker = new L.marker([item.position.lng, item.position.lat], {\n        size: \"7px\",\n        icon: this.bikeIcon,\n      });\n\n      marker.addTo(this.map2);\n    });\n  }\n  //function to calculte the difference between two date , it gets a Timestamp as parameter\n\n  date_filter(temps) {\n    var temps_date = new Date(temps).getTime();\n    var difference = new Date().getTime() - temps_date;\n    return Math.floor(difference / (60 * 1000));\n  }\n\n  /**\n   * forwards to trips page while storing necessary information\n   */\n  forward() {\n    console.log(\"forward called\");\n    console.info(\n      \"startpoint:\",\n      this.startpoint,\n      \"endpoint:\",\n      this.endpoint,\n      \"route_id:\",\n      this.choosen_route_id,\n      \"route:\",\n      this.choosen_route_geometry,\n      \"users_positions:\",\n      this.users_positions,\n      \"meetlat:\",\n      this.meetlat,\n      \"meetlng:\",\n      this.meetlng,\n      \"leavelat:\",\n      this.leavelat,\n      \"leavelng:\",\n      this.leavelng,\n      \"overlapse:\",\n      this.meetpts,\n      \"logText:\",\n      this.logText,\n      \"prev:\",\n      this.logg,\n      \"meetingStreet:\",\n      this.meetingStreet,\n      \"leavingStreet:\",\n      this.leavingStreet\n    );\n\n    /*\n      transfer service will be called\n    */\n\n    let validDataTransfer: boolean = false;\n    let condition =\n      this.steps != undefined &&\n      this.startpoint.lat != undefined &&\n      this.startpoint.lng != undefined &&\n      this.endpoint.lat != undefined &&\n      this.endpoint.lng != undefined &&\n      this.choosen_route_id != undefined &&\n      this.choosen_route_geometry != undefined &&\n      this.steps != null &&\n      this.startpoint.lat != null &&\n      this.startpoint.lng != null &&\n      this.endpoint.lat != null &&\n      this.endpoint.lng != null &&\n      this.choosen_route_id != null &&\n      this.choosen_route_geometry != null;\n\n    if (condition) {\n      try {\n        this.transfer._setNavSteps(this.steps);\n        this.transfer._setStartPosition(this.startpoint);\n        this.transfer._setDestinationPosition(this.endpoint);\n        this.transfer._setRouteID(this.choosen_route_id);\n        this.transfer._setRouteGeometry(this.choosen_route_geometry);\n        this.transfer._setUserPosition(this.users_positions);\n        this.transfer._setMeetingPoint({\n          lat: this.meetlat,\n          lng: this.meetlng,\n        });\n        this.transfer._setLogText(this.logText);\n        this.transfer._setPreviousLog(this.logg);\n        this.transfer._setLeavingStreet(this.leavingStreet);\n        this.transfer._setOverlapse(this.meetpts);\n        this.transfer._setLeavingPoint({\n          lat: this.leavelat,\n          lng: this.leavelng,\n        });\n        this.transfer._setLastPointRoute(this.lastPointRoute);\n        this.transfer._setTripdistance(this.distance[0]);\n        // save the intersections for the choosen route and the point of intersections by filtering for the user id\n\n        let array = this.expectedSwarmsArray;\n        let filterArrayForChoosenRoute = array.filter((element) => {\n          console.log(element);\n\n          return element.trip_id == this.choosen_route_id;\n        });\n        console.log(\"filterArrayForChoosenRoute\", filterArrayForChoosenRoute);\n\n        console.log(\"array forwarded\", filterArrayForChoosenRoute);\n        this.transfer._setExpectedSwarmArray(filterArrayForChoosenRoute);\n        let choosenList: any = this.sortedUsersPositionwithTripID.filter(\n          (element) => {\n            return element.trip_id == this.choosen_route_id;\n          }\n        );\n        console.log(\"choosenList\", choosenList);\n        // ! TODO: check user list for transfer if all the users are present if not then gettripintersection promise code needs to be modified to make it work\n        if (choosenList.length != 0) {\n          if (\n            choosenList[0].userObject != undefined &&\n            choosenList[0].userObject != null\n          ) {\n            let a = [...choosenList[0].userObject];\n            console.log(\"choosenList\", a);\n            let c = [];\n            let new_f = a.map((obj) => {\n              let a = [obj];\n              let o = {\n                users: a,\n              };\n              console.log(\"mapping \", obj);\n              c.push(o);\n\n              return { users: a };\n            });\n            console.error(\" User data to be forwarded\", c);\n            console.error(\"choosenList\", new_f);\n            this.transfer._setUserList(c);\n          } else {\n            // empty array will be initialized\n            let array = [];\n            this.transfer._setUserList(array);\n          }\n        } else {\n          // empty array will be initialized\n          let array = [];\n          this.transfer._setUserList(array);\n        }\n      } catch (error) {\n        console.log(\"error in transfer service \", error);\n      }\n      validDataTransfer = true;\n    } else {\n      console.log(\n        \"problem with the information to be passed on to the transfer some property is null or undefined\"\n      );\n      validDataTransfer = false;\n    }\n    console.log(\n      \"present checkpoint names\",\n      this.meetingStreet,\n      this.leavingStreet,\n      this.endTripStreet\n    );\n\n    if (validDataTransfer) {\n      this.navCtrl\n        .navigateRoot([\"/trip\"])\n        .then(\n          (suc) => {\n            console.log(\"successfully transmitted to trips page\", suc);\n          },\n          (error) => {\n            console.log(\"eRROR while navigating to trip\", error);\n          }\n        )\n        .catch((error) => {\n          console.error(\"there was an error during transit of pages \");\n          // alert(\"problems with transit\");\n          this.navCtrl.navigateRoot(\"/home\");\n        });\n    } else {\n      // ! show alert here as we cannot move to another page due to invalid values\n    }\n\n    this.logText =\n      this.logText +\n      new Date().toISOString().substring(11, 19) +\n      \" Trip selected: Overall trip distance = \" +\n      this.distance[0] +\n      \", Overlap distance = \" +\n      this.intersection_distance +\n      \"\\r\\n\";\n\n    if (this.platform.is(\"android\")) {\n      this.writeLogs();\n      this.file\n        .writeFile(\n          this.file.externalApplicationStorageDirectory,\n          this.app.filename,\n          this.logText,\n          { append: true }\n        )\n        .then(\n          (success) => {\n            console.log(\"file written\", success);\n          },\n          (error) => {\n            console.log(\"error writing the file \", error);\n          }\n        );\n    }\n    console.log(\"finsished with forward call on proposal\");\n  }\n  /**\n   * go back to home page\n   */\n  backward() {\n    console.log(\"TRIPPROPOSAL BACKWARD CALL URL\", this.router.url);\n    if (this.map2) {\n      this.map2.stopLocate();\n      this.map2.off();\n    }\n    this.router.navigateByUrl(\"/home\").then(\n      () => {\n        console.log(\"succesfull navigation \");\n        // window.location.reload()\n      },\n      (err) => {\n        console.log(\"Transition error from Tripproposal to home page\", err);\n        this.router.navigateByUrl(\"/home\");\n        this.app.initializeApp();\n      }\n    );\n  }\n\n  writeLogs() {\n    let prevLog = this.prev;\n    let __this: TripproposalsPage = this;\n    NativeLogs.getLog(1000, true, function (_logs) {\n      __this.logg = prevLog + _logs;\n    });\n    this.file\n      .writeFile(\n        this.file.externalApplicationStorageDirectory,\n        this.app.filelog,\n        this.logg,\n        { append: true }\n      )\n      .then(\n        (suc) => {\n          // console.log(\"write file\", suc);\n        },\n        (error) => {\n          // console.error(\"write file\", error);\n        }\n      );\n  }\n  beforeSelected = undefined; // before selected user\n  /**\n   * @returns {void} resets the view when the modal is dismissed\n   */\n  expandableListReset() {\n    if (this.beforeSelected) {\n      this.beforeSelected.checkpointMarker.setIcon(this.iconOrange_deactive);\n      this.beforeSelected.leavingMarker.setIcon(this.leavingPointIcondeactive);\n      this.beforeSelected = undefined;\n      this.active = undefined;\n      this.activeType = undefined;\n      L.Marker.stopAllBouncingMarkers();\n    }\n    if (this.dynamicPolyline) {\n      this.dynamicPolyline.setLatLngs([]);\n    }\n  }\n  active;\n  activeType;\n  selectCheckpoint(user: Users, type?) {\n    console.error(this.expandableList);\n    console.log(\"Swarm selected\", user);\n    this.active = user;\n    this.activeType = type;\n\n    this.modal.getCurrentBreakpoint().then((breakPoint) => {\n      console.log(\"breakpoint is :\", breakPoint);\n      if (breakPoint == 0.05) {\n        // change the break point\n        this.modal.setCurrentBreakpoint(0.25);\n      }\n    });\n\n    if (this.beforeSelected) {\n      this.beforeSelected.checkpointMarker.setIcon(this.iconOrange_deactive);\n      this.beforeSelected.leavingMarker.setIcon(this.leavingPointIcondeactive);\n      this.beforeSelected = user;\n      L.Marker.stopAllBouncingMarkers();\n    } else {\n      this.beforeSelected = user;\n    }\n    let selectedcheckpointMarker = user.checkpointMarker;\n    let selectedLeaveCheckpoint = user.leavingMarker;\n    selectedcheckpointMarker.setIcon(this.iconOrange_active);\n    selectedLeaveCheckpoint.setIcon(this.leavingPointIconActive);\n\n    if (type == \"meeting\") {\n      selectedcheckpointMarker.bounce(5);\n    } else if (type == \"leaving\") {\n      selectedLeaveCheckpoint.bounce(5);\n    }\n\n    if (!this.dynamicPolyline) {\n      this.createPolyline(user);\n    } else {\n      this.map2.removeLayer(this.dynamicPolyline);\n      this.createPolyline(user);\n    }\n  }\n  createPolyline(user) {\n    this.dynamicPolyline = new L.polyline([], {\n      color: user.color,\n      weight: 8,\n      opacity: 0.9,\n      lineJoin: \"round\",\n    });\n\n    this.dynamicPolyline.addTo(this.map2);\n    this.dynamicPolyline.setLatLngs(user.intersection_polyline_LatLngs);\n  }\n\n  /**\n   * @returns list of objects with their inoformation to be displayed on thr tripproposal page\n   */\n  updateExpandableList() {\n    this.expandableList =\n      this.filteredGroupedbyCategoryList[this.choosen_route_id];\n    // alert(this.choosen_route_id);\n    let array = [];\n    console.log(\"nextfinal expandableList in updateList\", this.expandableList);\n\n    if (this.expandableList != undefined) {\n      Object.entries(this.expandableList).forEach(([key, val]) => {\n        console.log(key); // the name of the current key.\n        console.log(val); // the value of the current key.\n\n        if (key == \"null\") {\n          // provide all the information to be shown with the keywords in the expandable list\n\n          val.forEach((element) => {\n            let object = {\n              type: \"meeting\",\n              participant: 1,\n              mode: element.speed > 5 ? \"Fast\" : \"Slow\",\n              user: element,\n            };\n            array.push(object);\n\n            // leaving point object\n\n            let leaveObj = {\n              type: \"leaving\",\n              participant: 1,\n              user: element,\n              leave_event: this.checkLeavingPoint(element)\n                ? \"You leave the swarm\"\n                : \"Someone leaves the swarm\",\n              // \"streetName\": this.reverseGeocode()\n            };\n            array.push(leaveObj);\n          });\n        } else {\n          let object = {\n            type: \"meeting\",\n            participant: val.length,\n            mode: val[0].speed > 5 ? \"Fast\" : \"Slow\",\n            user: val[0],\n          };\n          array.push(object);\n\n          // leaving point object\n\n          let leaveObj = {\n            type: \"leaving\",\n            participant: 1,\n            user: val[0],\n            leave_event: this.checkLeavingPoint(val[0])\n              ? \"You leave the swarm\"\n              : \"Someone leaves the swarm\",\n            // \"streetName\": this.reverseGeocode()\n          };\n          array.push(leaveObj);\n        }\n        console.log(array);\n      });\n    }\n    console.log(\"nextfinal\", array);\n    this.expandableList = array;\n    if (this.expandableList.length != 0) {\n      this.openModal = true;\n      this.ionModalChange();\n    } else {\n      this.openModal = false;\n    }\n  }\n\n  ionBreakpointDidChange() {\n    console.log(\"change in breakpoint\");\n  }\n\n  ionModalChange() {\n    this.modal.ionBreakpointDidChange.subscribe((data) => {\n      this.modal.getCurrentBreakpoint().then((breakPoint) => {\n        if (breakPoint == 0.05) {\n          this.expandableListReset();\n          console.log(\"reset everything\");\n        } // else dont do anything\n      });\n      console.error(\"ionView change in breakpoint\");\n    });\n  }\n  // TODO : currently the intersection is shown which has the maximum distance .\n  // TODO : have to integrate it in the app , to show the intersection of other trips together with the one [big UI problem ]\n  checkLeavingPoint(user: Users): boolean {\n    // if not the end point of intersection , then return someone will leave the trip -> @return false\n    // else -> you will leave the swarm i.e @return true\n\n    return true; // i.e \"you will leave the swarm at a point \"\n  }\n\n  /**\n   * decode the trip geometry to get polylines\n   * @param encoded trip geometery in form of a polyline\n   * @returns decoded array of polyline\n   */\n\n  decode(encoded): any {\n    // array that holds the points\n    var points = [];\n    var index = 0,\n      len = encoded.length;\n    var lat = 0,\n      lng = 0;\n    while (index < len) {\n      var b,\n        shift = 0,\n        result = 0;\n      do {\n        b = encoded.charAt(index++).charCodeAt(0) - 63; //finds ascii   //and substract it by 63\n        result |= (b & 0x1f) << shift;\n        shift += 5;\n      } while (b >= 0x20);\n\n      var dlat = (result & 1) != 0 ? ~(result >> 1) : result >> 1;\n      lat += dlat;\n      shift = 0;\n      result = 0;\n      do {\n        b = encoded.charAt(index++).charCodeAt(0) - 63;\n        result |= (b & 0x1f) << shift;\n        shift += 5;\n      } while (b >= 0x20);\n      var dlng = (result & 1) != 0 ? ~(result >> 1) : result >> 1;\n      lng += dlng;\n\n      points.push({ latitude: lat / 1e5, longitude: lng / 1e5 });\n    }\n    return points;\n  }\n}\n"],"names":["ChangeDetectorRef","Component","ViewChild","DeviceOrientation","AlertController","IonModal","ModalController","NavController","NavParams","Platform","AppComponent","RestApiService","File","NativeGeocoder","TransferService","StorageService","Router","MathematicalModel","Global","TripproposalsPage","constructor","router","navCtrl","navParams","restprovider","alertCtrl","modalCtrl","device","app","nativeGeocoder","file","platform","transfer","storage","mathModel","ref","globalFunction","latitude","longitude","routes","choosen_route_id","lng","lat","L","AwesomeMarkers","icon","markerColor","prefix","iconColor","iconUrl","iconSize","iconAnchor","Marker","popup","autoClose","undefined","add_users_positions","bind","ngOnInit","console","log","detectChanges","ionViewWillEnter","initalizationMain","loadCoordinates","ShowProgressBar","openModal","startpoint","endpoint","getTripProposal","then","data","catch","error","choosen_route_geometry","geometry","distance","intersections_array","sum","forEach","element","indexpts","indexpt","length","intersection_distance","expected_swarmID","expected_swarm_id","meetpts","decode","meetlat","meetlng","leavelat","leavelng","toString","trim","split","decodeRoute","lastPointRoute","is","reverseGeocode","expectedSwarmsArray","Promise","all","map","elem","obj","dataArray","trip_intersections","element3","getTripintersection","trip_intersection_id","data_tripIntersection","getUserlocation","foreign_trip_id","users","device_id","obj_list","push","element2","trip_id","trip_id_geometry","swarm_id","intersection_geometry","intersections","position","speed","color","generateColor","overlap","coordinates","waypoint","LatLng","intersection_polyline_LatLngs","array","sortedUsersPositionwithTripID","userObject","warn","getTrips","tripData","foreign_trip_id_geometry","val","x","distanceToCover_forSwarm","getDistanceWithBreakpoint","swarm_distanceToCover","distanceToCover_forUser","user_distanceToCover","ETA_forExpectedSwarm","calculateETADynamic","leavingpoint_distance","user_distance_to_leaving_point","ETA_swarm","ETA_forUser","calculateETAStatic","ETA_user","isAbleToMakeSwarm","tripproposals_criteria","recommended_speed","calculateSuggestedSpeed","suggestedSpeed","refreshMarkerPopup","setTimeout","modal","dismiss","group","product","includes","groupByCategory1","reduce","Object","entries","entry","key","value","groupByCategory2","filteredGroupedbyCategoryList","filteredList","steps","_setNavSteps","groupList","loadmap","logText","Date","toISOString","substring","writeFile","externalApplicationStorageDirectory","filename","append","writeLogs","ionViewDidEnter","ionViewWillLeave","map2","off","remove","checkpointMarkerArray","marker","clearInterval","PotentialSwarmLocationUpdateInterval","ionViewDidLeave","flag","next","reload","exit","startLat","_getStartPosition","startLng","endLat","_getDestinationPosition","endLng","prev","_getPreviousLog","_getLogText","backward","createLogo","arr","setIcon","swarmIcon","setLatLng","addTo","fake_trips","setView","tileLayer","updateExpandableList","expandableList","decodedPolyline","polyline","weight","opacity","lineJoin","bindPopup","decodedPolyline2","coordinates2","polyline2","openPopup","fitBounds","getBounds","startMarkerIcon","locate","watch","enableHighAccuracy","on","e","latlng","destinationIcon","draw","createCheckpoints","removeLayer","setStyle","setCurrentBreakpoint","deleteCheckpointsMarker","choosen_route","options","iconOrange_deactive","decodedArray","a","selectCheckpoint","leaveMarker","b","leavingPointIcondeactive","checkpointMarker","leavingMarker","getPopup","getContent","reachable","popupContent","Math","round","setContent","update","refreshTripProposal","stopLocate","_setStartPosition","polyline1","decodedPolyline3","coordinates1","checkPointMarker_meet","checkpointIcon","meetingStreet","checkPointMarker_meet_popup","checkPointMarker_leave","leavingStreet","hasLayer","street","useLocale","maxResults","defaultLocale","result","thoroughfare","subThoroughfare","endTripStreet","_setEndTripStreet","present_alert_Json","alert","create","header","subHeader","buttons","text","handler","navigateRoot","initializeApp","present","update_user","set","putTrips","forward","users_positions","item","size","bikeIcon","date_filter","temps","temps_date","getTime","difference","floor","info","logg","validDataTransfer","condition","_setDestinationPosition","_setRouteID","_setRouteGeometry","_setUserPosition","_setMeetingPoint","_setLogText","_setPreviousLog","_setLeavingStreet","_setOverlapse","_setLeavingPoint","_setLastPointRoute","_setTripdistance","filterArrayForChoosenRoute","filter","_setExpectedSwarmArray","choosenList","c","new_f","o","_setUserList","suc","success","url","navigateByUrl","err","prevLog","__this","NativeLogs","getLog","_logs","filelog","expandableListReset","beforeSelected","active","activeType","stopAllBouncingMarkers","dynamicPolyline","setLatLngs","user","type","getCurrentBreakpoint","breakPoint","selectedcheckpointMarker","selectedLeaveCheckpoint","iconOrange_active","leavingPointIconActive","bounce","createPolyline","object","participant","mode","leaveObj","leave_event","checkLeavingPoint","ionModalChange","ionBreakpointDidChange","subscribe","encoded","points","index","len","shift","charAt","charCodeAt","dlat","dlng","args","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}