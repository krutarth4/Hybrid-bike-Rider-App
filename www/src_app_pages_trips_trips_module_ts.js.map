{"version":3,"file":"src_app_pages_trips_trips_module_ts.js","mappings":"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","sources":["./src/app/pages/trips/trips-routing.module.ts","./src/app/pages/trips/trips.module.ts","./src/app/pages/trips/trips.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { TripsPage } from './trips.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TripsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class TripsPageRoutingModule {}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { FormsModule } from \"@angular/forms\";\n\nimport { IonicModule } from \"@ionic/angular\";\n\nimport { TripsPageRoutingModule } from \"./trips-routing.module\";\n\nimport { TripsPage } from \"./trips.page\";\nimport { NgxGaugeModule } from \"ngx-gauge\";\nimport { SharedModuleModule } from \"src/app/modules/sharedModule/shared-module/shared-module.module\";\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TripsPageRoutingModule,\n    NgxGaugeModule,\n    SharedModuleModule\n  ],\n  declarations: [TripsPage],\n})\nexport class TripsPageModule {}\n","import {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  OnInit,\n  ViewChild,\n} from \"@angular/core\";\nimport { DeviceOrientation } from \"@awesome-cordova-plugins/device-orientation/ngx\";\nimport { File } from \"@awesome-cordova-plugins/file/ngx\";\nimport {\n  Geolocation,\n  Geoposition,\n  PositionError,\n} from \"@awesome-cordova-plugins/geolocation/ngx\";\nimport {\n  NativeGeocoder,\n  NativeGeocoderOptions,\n} from \"@awesome-cordova-plugins/native-geocoder/ngx\";\nimport { Geofence } from \"@ionic-native/geofence\";\nimport {\n  AlertController,\n  NavController,\n  NavParams,\n  Platform,\n} from \"@ionic/angular\";\nimport { AppComponent } from \"src/app/app.component\";\nimport { Events } from \"src/app/services/events/events.service\";\nimport { RestApiService } from \"src/app/services/rest-api/rest-api.service\";\nimport { SignalingService } from \"src/app/services/signaling/signaling.service\";\nimport \"leaflet.awesome-markers/dist/leaflet.awesome-markers\";\nimport findNearest from \"geolib/es/findNearest\";\nimport getPathLength from \"geolib/es/getPathLength\";\nimport { TransferService } from \"src/app/services/transferdata/transfer.service\";\nimport { StorageService } from \"src/app/services/storage/storage.service\";\nimport { AppCenterAnalytics } from \"@awesome-cordova-plugins/app-center-analytics/ngx\";\nimport { GlobalConstants as GConst } from \"src/app/common/global-constants\";\nimport { MathematicalModel } from \"src/app/class/MathematicalModel/mathematical-model\";\nimport { Users } from \"src/app/interface/users\";\nimport { OutputControllerService } from \"src/app/services/outputController/output-controller.service\";\nimport { Global } from \"src/app/class/Globalfunction/Global\";\nimport { BehaviorSubject } from \"rxjs\";\nimport { NgxGauge } from \"ngx-gauge\";\nimport \"leaflet.smooth_marker_bouncing\";\nimport { GetTripIntersecionsResponse } from \"src/app/interface/get-trip-intersecions-response\";\nimport { User } from \"src/app/interface/user\";\nimport { GetTripsResponse } from \"src/app/interface/get-trips-response\";\n\ndeclare var NativeLogs: any;\ndeclare var L: any;\ndeclare var NearbyConnections: any;\n\n@Component({\n  selector: \"app-trips\",\n  templateUrl: \"./trips.page.html\",\n  styleUrls: [\"./trips.page.scss\"],\n})\n\n//TODO: check fo the new user and users position update and how the UI is reacting to the new location input\n// TODO: check where to update swarmArray information and the data foemat\nexport class TripsPage implements OnInit {\n  @ViewChild(\"map\") mapElement: ElementRef;\n  @ViewChild(\"appAlert\") appAlert: ElementRef;\n  map: any;\n  marker;\n  trip_id;\n  meetlat;\n  meetlng;\n  startpoint;\n\n  startMarkerIcon = L.icon({\n    iconUrl: \"../assets/content/images/start_marker.png\",\n    iconSize: [40, 40], // size of the icon\n  });\n  endpoint;\n  current_position: any = {};\n  /**\n   * @deprecated\n   */\n  users_positions: any;\n  trip_polyline;\n  decodedPolyline;\n  deviceorientation: any;\n  exist: boolean = false;\n  distance: any = null;\n  popup: boolean = false;\n  overlay = \"\";\n  otherUserPosition = L.icon({\n    iconUrl: \"../assets/content/images/swarm1.png\",\n    iconSize: [32, 32], // size of the icon\n  });\n  myPositionIcon = L.icon({\n    iconUrl: \"../assets/content/images/bike.png\",\n    iconSize: [32, 32], // size of the icon\n  });\n  destinationIcon = L.icon({\n    iconUrl: \"../assets/content/images/destination.png\",\n    iconSize: [32, 32], // size of the icon\n  });\n\n  meetingPointIconDefault = L.icon({\n    iconUrl: `https://api.geoapify.com/v1/icon/?type=material&color=%23ec7b19&icon=users&iconType=awesome&scaleFactor=2&apiKey=c7ff719c2709426abb5c162d7361a78b`,\n    iconSize: [30, 40], // size of the icon\n  });\n\n  meetingPointIconActive = L.icon({\n    iconUrl: `https://api.geoapify.com/v1/icon/?type=material&color=%23ec7b19&icon=users&iconType=awesome&scaleFactor=2&apiKey=c7ff719c2709426abb5c162d7361a78b`,\n    iconSize: [35, 50], // size of the icon\n  });\n  leavingPointIconActive = L.icon({\n    iconUrl: `https://api.geoapify.com/v1/icon/?type=material&color=%23ec7b19&icon=users-slash&iconType=awesome&scaleFactor=2&apiKey=c7ff719c2709426abb5c162d7361a78b`,\n    iconSize: [35, 50], // size of the icon\n  });\n  leavingPointIcondeactive = L.icon({\n    iconUrl: `https://api.geoapify.com/v1/icon/?type=material&color=%23ec7b19&icon=users-slash&iconType=awesome&scaleFactor=2&apiKey=c7ff719c2709426abb5c162d7361a78b`,\n    iconSize: [30, 40], // size of the icon\n  });\n\n  swarmId = null;\n  user = null;\n  Seconduser = null;\n  overlapse;\n  geofenceDebug: Boolean = false; // use to see information of created geofences in the UI\n  /**\n   * @deprecated\n   * not in use anymore\n   */\n  userList: any;\n  checkList: any;\n  // interval for circle check, user position update and distance calculation\n  interval1;\n  interval2;\n  // ! not in use anymore\n  variable_names = {};\n  filterUser: any;\n  c = new L.circle();\n  accuracyMarker = new L.circle();\n  cercle;\n  cercleFlag: boolean = false;\n  logText;\n  userIDs = \"\";\n  position: any = \"\";\n  event = \"\";\n  table = [];\n  eventType = \"\";\n  // event logging variable\n  coordonate = {\n    position_timestamp: new Date().toISOString().substring(11, 19),\n    userID: this.userIDs,\n    Position: this.position,\n    EventType: this.eventType,\n    Event: this.event,\n  };\n  object;\n  time;\n  prev;\n  public logg: any;\n  overlapsePolyline;\n  meetptss = { lat: 0, lng: 0 };\n  leavelat: any;\n  leavelng: any;\n  leaveptss: { lat: any; lng: any };\n  closest;\n  //card number is associated to the distance and duration text display\n  card = \"1\";\n  meetingStreet;\n  leavingStreet;\n  finalDistance;\n  cameraTracker: boolean = true;\n  static trip_id2: any;\n  static user_position: any;\n  lastPointRoute;\n  marker2;\n  geoInterval;\n  marker3;\n  onlocation = {};\n  navigationMessage = \"Have a nice ride\";\n  navigationCalculation = undefined;\n  directionalIcon = \"../assets/content/images/bike.png\";\n  steps;\n  endTripStreet;\n  geofenceCount = 0;\n  geocountInterval;\n  currentSpeed: number = 0;\n  expectedSwarmsArray: Users[];\n  choosenMeetingPoint; // this is the choosen checkpoint for which suggested speed will be calculated\n  checkPointMarkerArray = [];\n  dynamicPolyline;\n  showCurrentSpeed: number = 0;\n  i = 0;\n  showCurrentSpeedColor: string = \"orange\";\n  yourETA;\n  accuracyMarkerFlag: boolean = false;\n  // gauge information\n  // gauge condition to show\n  showSpeedometer: boolean = true;\n  gaugeType = \"semi\";\n  gaugeValue = 30; //this.currentSpeed; // this is the current speed m/sec // to convert the unit to km/hr mulitply by 3.6\n  gaugeLabel = \"Current Speed\";\n  gaugeAppendText = \"m/sec\"; // units fro speed measurement\n\n  thresholdConfig = {\n    0: {\n      color: \"orange\",\n      bgOpacity: 0.9,\n    },\n    20: {\n      color: \"green\",\n      bgOpacity: 0.9,\n    },\n    40: {\n      color: \"red\",\n      bgOpacity: 0.9,\n    },\n  };\n  suggestedSpeed = undefined;\n  distance_to_meet_checkpoint;\n  /**\n   * @not_in_use as we have custom design properties according to the speed which is a dynamic property\n   */\n  markerConfig = {\n    0: { color: \"#555\", size: 4, label: \"0\", type: \"line\" },\n    15: { color: \"#555\", size: 2, type: \"line\" },\n    30: { color: \"#555\", size: 4, label: \"30\", type: \"line\" },\n    40: { color: \"#555\", size: 2, type: \"line\" },\n    50: { color: \"#555\", size: 4, label: \"50\", type: \"line\" },\n    [this.suggestedSpeed]: {\n      color: \"#555\",\n      size: 4,\n      label: \"s\",\n      type: \"triangle\",\n    },\n  };\n  foregroundcolor = \"'black'\";\n  backgroundcolor = \"black\";\n  reachable: boolean;\n  // not in use\n  footerColor = \"orange\";\n  // not in use\n  showsecondline: boolean = false;\n\n  showFooter: boolean = false;\n\n  swarmMessage;\n  swarmMessageSubscription;\n  checkpointMessage;\n  checkpointMessageSubscription;\n\n  showSwarmInformation: boolean = false; // flag to show swarm in UI or not\n  border_color = \"white\"; // default color\n  numberOfMembersInSwarm = 0;\n\n  // critical information for the overlap and swarm formation\n  /**\n   * this array will help to compare locally saved expectedSwarmArray to know about users left, new users and much more\n   */\n  userData: any[] = [];\n  // ------------------\n  constructor(\n    public events: Events,\n    private alertCtrl: AlertController,\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public rest: RestApiService,\n    public geolocation: Geolocation,\n    public platform: Platform,\n    private geofence: Geofence,\n    public signal: SignalingService,\n    private ref: ChangeDetectorRef,\n    private file: File,\n    public app: AppComponent,\n    private nativeGeocoder: NativeGeocoder,\n    private transfer: TransferService,\n    private storage: StorageService,\n    public mathModel: MathematicalModel,\n    private outputCtrl: OutputControllerService,\n    private global: Global,\n    private gauge: NgxGauge\n  ) {\n    console.log(\"trip page constructor\");\n    console.log(\"Welcome to trips page\");\n    var userID = this.rest.userId;\n    console.log(\"user ID\", userID);\n\n    this.loadInformation();\n    //this code is only used when on mobile device since it does not function on browser\n    try {\n      if (this.platform.is(\"android\")) {\n        platform.ready().then(() => {\n          // check nearbyconnections plugin first\n          if (NearbyConnections) {\n            console.log(\"nearbyconnections is now defined\");\n            this.logText =\n              this.logText +\n              new Date().toISOString().substring(11, 19) +\n              \" Nearbyconnections is now defined \\r\\n\";\n            this.file.writeFile(\n              this.file.externalApplicationStorageDirectory,\n              this.app.filename,\n              this.logText,\n              { append: true }\n            );\n          }\n          //start the plugin\n          console.log(\"startservice\");\n          NearbyConnections.startService(\n            function () {},\n            function () {},\n            this.rest.deviceId\n          );\n          console.log(\"listen service\");\n          NearbyConnections.listenConnections(\n            function (success) {\n              console.log(\"Nearbyconnection success variable is : \", success);\n\n              if (success[\"event_type\"] == \"MESSAGE_RECEIVED\") {\n                events.groupDBController(success);\n              } else {\n                events.initialize(success);\n              }\n            },\n            function (err) {\n              console.log(\"ERROR in nearby :\", err);\n            }\n          );\n        });\n\n        this.deviceorientation = new DeviceOrientation();\n      }\n    } catch (e) {\n      console.log(\"error nearby connection listen event\", e);\n    } finally {\n      console.log(\"constructor has finished\");\n    }\n  }\n  /**\n   * @returns it initializes the critical values needed for trips page\n   */\n  loadInformation() {\n    console.log(\"loadinformation from transfer service\");\n\n\n    if (!this.rest.offline) {\n      try {\n        this.steps = this.transfer._getNavSteps();\n        this.distance = this.transfer._getTripDistance();\n\n        this.startpoint = this.transfer._getStartPosition();\n        this.endpoint = this.transfer._getDestinationPosition();\n        this.trip_id = this.transfer._getRouteID();\n        this.trip_polyline = this.transfer._getRouteGeometry();\n        this.meetingStreet = this.transfer._getMeetingStreet();\n        this.leavingStreet = this.transfer._getleavingStreet();\n        this.meetlat = this.transfer._getMeetingPoint().lat;\n        this.meetlng = this.transfer._getMeetingPoint().lng;\n        this.meetptss = { lat: this.meetlat, lng: this.meetlng };\n        this.leavelat = this.transfer._getLeavingPoint().lat;\n        this.leavelng = this.transfer._getLeavingPoint().lng;\n        this.leaveptss = { lat: this.leavelat, lng: this.leavelng };\n        this.overlapse = this.transfer._getOverlapse();\n        this.logText = this.transfer._getLogText();\n        this.endTripStreet = this.transfer._getEndTripStreet();\n        this.lastPointRoute = this.transfer._getLastPointRoute();\n        this.expectedSwarmsArray = this.transfer._getExpectedSwarmArray();\n        if (this.expectedSwarmsArray.length != 0) {\n          // default checkpoint for the calculation\n          this.choosenMeetingPoint = this.expectedSwarmsArray[0];\n          console.log(\"choosen checkpoint default \", this.choosenMeetingPoint);\n          this.overlapse = this.decode(\n            this.choosenMeetingPoint.intersection_geometry\n          );\n        }\n        this.userData = [];\n        this.userData = this.transfer._getUserList();\n        console.log(\"Userdata\", this.userData);\n      } catch (error) {\n        console.log(\"error initilaizing\", error);\n        this.goHome(\"aborted\");\n        console.log(\"Going Home....\");\n        window.location.reload();\n      }\n    }\n  }\n\n  ngOnInit() {\n    this.ref.detectChanges();\n    if (this.platform.is(\"android\")) {\n      this.platform.ready().then(() => {\n        this.addDestinationGeofence();\n        setTimeout(() => {\n          // create geofence for turns\n          this.geofenceTurns();\n        }, 1500);\n        setTimeout(() => {\n          this.addpoint();\n        }, 3000);\n      });\n\n      this.file\n        .writeFile(\n          this.file.externalApplicationStorageDirectory,\n          this.app.filename,\n          this.logText,\n          { append: true }\n        )\n        .then(\n          (suc) => {},\n          (err) => {}\n        );\n    }\n    this.checkpointMessageSubscription = this.outputCtrl._cast_checkpoint_alert\n      .pipe()\n      .subscribe(\n        (message) => {\n          this.checkpointMessage = message;\n        },\n        (error) => {\n          console.error(\"Subscription error\", error);\n        }\n      );\n    this.swarmMessageSubscription = this.outputCtrl._cast_swarm_alert\n      .pipe()\n      .subscribe(\n        (message) => {\n          this.swarmMessage = message;\n        },\n        (error) => {\n          console.error(\"Subscription error\", error);\n        }\n      );\n    console.log(\"ngonint finished\");\n    this.fcmSubscriber();\n  }\n  /**\n   *\n   * @param data from the backend for the user position update and check for any new users\n   *\n   * here all the operations will take place\n   * Generating checkpoint marker and deleting already left marker\n   * User position updates~ this data will be used by mathematical model further\n   *\n   */\n  updateSwarmArrayInformation(data: any) {\n    let old_array = this.expectedSwarmsArray;\n    let new_array = data;\n\n    console.warn(\"new array update swarm\", new_array);\n    console.warn(\"Old_array updateswarm\", old_array);\n    if (new_array.length > old_array.length) {\n      // if someone else joins the swarm\n      console.warn(\"new member joining\");\n      for (let i = 0; i < new_array.length; i++) {\n        try {\n          let item = new_array[i].users[0].device_id;\n          let element = new_array[i];\n          let found = old_array.findIndex(function (datanew: Users) {\n            return datanew.device_id == item;\n          });\n          console.warn(\"found\", found);\n          if (found < 0) {\n            // create a new object and push in\n            console.warn(\"new device found\");\n            console.warn(element);\n            let obj: Users = {\n              trip_id: this.trip_id,\n              trip_id_geometry: this.trip_polyline,\n              device_id: element.users[0].device_id,\n              foreign_trip_id: element.users[0].foreign_trip_id,\n              swarm_id: element.users[0].swarm_id,\n              intersection_distance: element.users[0].distance\n                .toString()\n                .trim()\n                .split(\".\")[0],\n              intersection_geometry: element.users[0].intersections[0],\n              position: element.users[0].position,\n              speed: element.users[0].speed,\n              color: this.global.generateColor(),\n            };\n            // get their trip geometry\n            this.rest\n              .getTrips(obj.foreign_trip_id)\n              .then((tripData: any) => {\n                console.log(\n                  \" ~ file: trips.page.ts:529 ~ TripsPage ~ .then ~ tripData:\",\n                  tripData\n                );\n\n                obj.foreign_trip_id_geometry = tripData.geometry;\n                return obj;\n              })\n              .catch((error) => {\n                console.error(\"error getting trips data \", error);\n              })\n              .then(() => {\n                // console.log(\"Object\", obj)\n                this.expectedSwarmsArray.push(obj);\n\n                console.log(\"all the expected swarm build up \");\n                // console.table(this.expectedSwarmsArray);\n              })\n              .catch((error) => {\n                console.error(\n                  \"ERROR geting trip data \",\n                  error,\n                  \"forDevice Id : \",\n                  element.element.users[0].device_id\n                );\n              });\n            // add marker checkpoint for the new point of intersection\n            setTimeout(() => {\n              this.createCheckpoint(obj);\n            }, 1000);\n          } else if (found >= 0) {\n            // update the user position and speed\n            let updatingUser = old_array[found];\n            console.warn(\"found positoin \", element.users[0].position);\n            updatingUser.position = element.users[0].position;\n            updatingUser.speed = element.users[0].speed;\n          }\n        } catch (error) {\n          console.error(\"new memeber update swarm error \", error);\n        }\n      }\n    } else if (new_array.length < old_array.length) {\n      // someone left the from the trip intersection\n      console.log(\"Someone left\");\n      for (let i = 0; i < old_array.length; i++) {\n        let item = old_array[i].device_id;\n\n        let found = new_array.findIndex(function (datanew) {\n          return datanew.users[0].device_id == item;\n        });\n        if (found < 0) {\n          try {\n            this.deleteCheckpoint(old_array[i]);\n          } catch (error) {\n            console.error(\"error in deleting\");\n          }\n        } else if (found >= 0) {\n          // update the array position and speed\n          let updatingUser = old_array[i];\n          let element = new_array[found];\n          updatingUser.position = element.users[0].position;\n          updatingUser.speed = element.users[0].speed;\n        }\n      }\n    } else if (new_array.length == old_array.length) {\n      console.log(\"same users intersections \");\n      // update the swarmExpected array\n      for (let i = 0; i < old_array.length; i++) {\n        let item = old_array[i].device_id;\n\n        let found = new_array.findIndex(function (datanew) {\n          return datanew.users[0].device_id == item;\n        });\n        console.warn(\"Founded in swarm Array\", found);\n        if (found < 0) {\n          // console.error(\"Inconsitent data. Try again....\")\n        } else if (found >= 0) {\n          console.log(\"user found and updating position\");\n          // update the array position and speed\n          let updatingUser = old_array[i];\n          let element = new_array[found];\n          console.warn(\"element founded\", element);\n          updatingUser.position = element.users[0].position;\n          updatingUser.speed = element.users[0].speed;\n        }\n      }\n    }\n\n    try {\n      new_array.forEach((element) => {\n        let new_device_id = element.users[0].device_id;\n        old_array.forEach((element2) => {\n          if (element2.device_id == new_device_id) {\n            // update the position\n            element2.position = element.users[0].position;\n            element2.speed = element.users[0].speed;\n          } else {\n            // update the swarm Array\n          }\n        });\n      });\n    } catch (error) {\n      console.error(\"Error generated updating swarm array position\", error);\n    }\n  }\n  /**\n   * The method helps to generate markers for meeting and leaving point of the new user\n   * Additionaly, it also creates a new geofences for the similar\n   * @param element A new user with user object\n   */\n  createCheckpoint(element: Users) {\n    // here only one-one checkpoint will be added\n\n    let marker = new L.Marker();\n\n    marker.setIcon(this.meetingPointIconDefault);\n    console.log(\"create checkpoint \", element);\n    console.log(\"marker should be available here \");\n    let a = this.decode(element.intersection_geometry)[0];\n\n    marker.setLatLng([a.latitude, a.longitude]);\n    marker.bindPopup(\"Loading...\", {\n      closeButton: false,\n      className: \"checkpointPopUp\",\n    });\n    marker.addTo(this.map);\n    element.checkpointMarker = marker;\n\n    // leaving point marker\n    let decode = this.decode(element.intersection_geometry);\n    let b = decode[decode.length - 1];\n    let leaveMarker = new L.Marker();\n    leaveMarker.setIcon(this.leavingPointIcondeactive);\n    leaveMarker.setLatLng([b.latitude, b.longitude]);\n    leaveMarker.addTo(this.map);\n    element.leavingMarker = leaveMarker;\n    let overlap = this.decode(element.intersection_geometry);\n    var coordinates = overlap.map(\n      (waypoint) => new L.LatLng(waypoint.latitude, waypoint.longitude)\n    );\n    element.intersection_polyline_LatLngs = coordinates;\n\n    // user position marker\n    try {\n      let userPositionMarker = new L.Marker();\n      userPositionMarker.setIcon(this.otherUserPosition);\n      userPositionMarker.setLatLng({\n        lat: element.position.lat,\n        lng: element.position.lng,\n      });\n      userPositionMarker.addTo(this.map);\n      element.marker = userPositionMarker;\n\n      this.checkPointMarkerArray.push({\n        checkpointmarker: marker,\n        userMarker: userPositionMarker,\n        leavingMarker: leaveMarker,\n      });\n    } catch (error) {\n      console.error(\"Other icon generator \", error);\n    }\n\n    // case, when only one meeting point present\n    if (this.choosenMeetingPoint == undefined) {\n      // console.log(\"new user creating checkpoint :\", this.choosenMeetingPoint)\n      this.choosenMeetingPoint = element;\n      element.checkpointMarker.setIcon(this.meetingPointIconActive);\n      element.leavingMarker.setIcon(this.leavingPointIconActive);\n      this.dynamicPolyline.setLatLngs(element.intersection_polyline_LatLngs);\n    }\n\n    // marker are click-able\n    marker.on(\n      \"click\",\n      async function () {\n        this.undoSelection(this.choosenMeetingPoint);\n        console.log(\"marker clicked\", marker);\n        console.log(element);\n        this.choosenMeetingPoint = element;\n        await this.choosenMeetingPoint;\n        this.suggestedSpeed = element.suggestedSpeed * 3.6;\n        this.suggestedSpeed = Math.round(this.suggestedSpeed * 10) / 10;\n        this.distance_to_meet_checkpoint = element.user_distanceToCover;\n        await this.suggestedSpeed;\n        marker.setIcon(this.swarmPointIconBig);\n        console.log(this.suggestedSpeed);\n\n        console.log(\"switching polyline\");\n        // this code snippet helps to dynamically change the polyline for the user for the choosen checkpoint\n        this.dynamicPolyline.setLatLngs(element.intersection_polyline_LatLngs);\n      },\n      this\n    );\n\n    // add geofence for the new checkpoint\n    setTimeout(() => {\n      this.createGeofence(element);\n    }, 2000);\n  }\n  currentLeg; // details for the approaching leg\n  currentLegIndex = 0; // current leg index in the steps array\n  NavigationalInterval;\n  /**\n   * it helps with the UI of navigational information\n   * @param steps coordinates for leg\n   */\n  manualNavigation(steps) {\n    this.decodedPolyline = this.decode(this.trip_polyline);\n    console.log(\"steps provided\", steps);\n    if (\n      this.current_position.lat == undefined ||\n      this.current_position.lng == undefined\n    ) {\n    } else {\n      this.currentLeg = steps[this.currentLegIndex];\n      this.navigationMessage = this.signal.checkNavigationInformation({\n        type: this.currentLeg.maneuver.type,\n        name: this.currentLeg.maneuver.name,\n        modifier: this.currentLeg.maneuver.modifier,\n      });\n      this.NavigationalInterval = setInterval(() => {\n        this.mathModel.getDistanceWithBreakpoint(\n          this.decodedPolyline,\n          {\n            latitude: this.current_position.lat,\n            longitude: this.current_position.lng,\n          },\n          {\n            latitude: this.currentLeg.location[1],\n            longitude: this.currentLeg.location[0],\n          }\n        );\n      }, 2000);\n\n      let legDistance = this.mathModel.getDistanceWithBreakpoint(\n        this.decodedPolyline,\n        {\n          latitude: this.current_position.lat,\n          longitude: this.current_position.lng,\n        },\n        {\n          latitude: this.currentLeg.location[1],\n          longitude: this.currentLeg.location[0],\n        }\n      );\n      if (legDistance >= 0) {\n        // send all the information\n\n        this.navigationCalculation = Math.ceil(legDistance / 10) * 10;\n      } else {\n        // switch to next leg\n        this.navigationCalculation = 0;\n        this.currentLegIndex++;\n        this.currentLeg = steps[this.currentLegIndex];\n        // to stop last leg distance calculation\n        clearInterval(this.NavigationalInterval);\n        if (this.currentLegIndex < this.steps.length) {\n          this.manualNavigation(this.steps);\n        } else {\n          // stop the all execution\n          // at the end of the route\n        }\n      }\n    }\n  }\n  createGeofence(element: Users) {\n    let fences = [];\n    let arr = this.expectedSwarmsArray;\n    let index = arr.findIndex(function (elem: Users) {\n      return element.device_id == elem.device_id;\n    });\n    if (index < 0) {\n      console.error(\"for new geofence id not found\");\n    } else {\n      console.log(\"index found successfully :\");\n    }\n    let meetlat = element.intersection_polyline_LatLngs[0].latitude;\n    let meetlng = element.intersection_polyline_LatLngs[0].longitude;\n    let leavelng =\n      element.intersection_polyline_LatLngs[\n        element.intersection_polyline_LatLngs.length - 1\n      ].longitude;\n    let leavelat =\n      element.intersection_polyline_LatLngs[\n        element.intersection_polyline_LatLngs.length - 1\n      ].latitude;\n\n    let meetfence_outside = {\n      id: GConst.meeting_checkppoint_id_outside + \".\" + element.foreign_trip_id,\n      latitude: meetlat,\n      longitude: meetlng,\n      radius: GConst.meeting_checkppoint_radius_outside,\n      transitionType: 1,\n      notification: {\n        id: 333,\n        title: \"\",\n        text: \"\",\n        openAppOnClick: false,\n      },\n    };\n    fences.push(meetfence_outside);\n    let meetfence_inside = {\n      id: GConst.meeting_checkppoint_id_inner + \".\" + index,\n      latitude: meetlat,\n      longitude: meetlng,\n      radius: GConst.checkpoint_radius_inner,\n      transitionType: 1,\n      notification: {\n        id: index,\n        title: \"\",\n        text: \"\",\n        openAppOnClick: false,\n      },\n    };\n    fences.push(meetfence_inside);\n    let leavefence_outside = {\n      id: GConst.leaving_checkppoint_id_outside + \".\" + index,\n      latitude: leavelat,\n      longitude: leavelng,\n      radius: GConst.leaving_checkppoint_radius_outside,\n      transitionType: 1,\n      notification: {\n        id: index,\n        title: \"\",\n        text: \"\",\n        openAppOnClick: false,\n      },\n    };\n    fences.push(leavefence_outside);\n    let leavefence_inside = {\n      id: GConst.leaving_checkppoint_id_inner + \".\" + index,\n      latitude: leavelat,\n      longitude: leavelng,\n      radius: GConst.checkpoint_radius_inner,\n      transitionType: 1,\n      notification: {\n        id: index,\n        title: \"\",\n        text: \"\",\n        openAppOnClick: false,\n      },\n    };\n    fences.push(leavefence_inside);\n    if (this.platform.is(\"android\")) {\n      this.platform.ready().then((succ) => {\n        try {\n          this.geofence.addOrUpdate(fences).then(\n            (success) => {\n              console.log(\"fences added\", fences);\n            },\n            (error) => {\n              console.log(\"error creating geofences \", error);\n            }\n          );\n        } catch (error) {\n          console.log(\"error creating geofences\", error);\n        }\n      });\n    }\n  }\n  /**\n   * FCm message subscriber\n   */\n  fcmSubscriber() {\n    this.app._fcm_observer.subscribe(\n      (data_fcm) => {\n        console.log(\"[fcm] new user trip intersection id \", data_fcm);\n        // create new user\n        if (\n          data_fcm.trip_intersection_id &&\n          data_fcm.trip_intersection_id != \"undefined\"\n        ) {\n          const updatedKey = \"foreign_trip_id\";\n          const distanceKey = \"distance\";\n          const intersectionKey = \"intersections\";\n\n          this.rest\n            .getTripintersection(data_fcm.trip_intersection_id, true)\n            .then((data: GetTripIntersecionsResponse) => {\n              console.warn(\"trip intersection \", data);\n              data.users.forEach((user) => {\n                let modifiedObject = {\n                  ...user,\n                  [updatedKey]: user.active_trip_id,\n                  [distanceKey]: data.trip_intersection.distance,\n                  [intersectionKey]: data.trip_intersection.intersections,\n                };\n                let found = this.userData.findIndex(function (datanew: any) {\n                  return datanew.users[0].device_id == user.device_id;\n                });\n                console.warn(\"FCM user found \", found);\n                if (found < 0) {\n                  console.log(\"new user found \");\n                  this.userData.push(modifiedObject);\n                } else {\n                  console.log(\"User already present\");\n                }\n              });\n\n              // update information for the swarm Array\n              try {\n                this.updateSwarmArrayInformation(this.userData);\n              } catch (error) {\n                console.log(\"ERROR from update list FCM\", error);\n              }\n            });\n        }\n      },\n      (error) => {\n        console.error(\"FCM subscriber error\", error);\n      }\n    );\n  }\n  /**\n   * This functions helps to check the trip status of the users and update the user position\n   * After which it calls updateswarm array and refresh user position\n   */\n  newUser() {\n    //check other user trip status and update their location\n    Promise.all(\n      this.userData.map((user, index) => {\n        // check if trip active\n        console.log(\"user data\", user);\n        this.rest.getTrips(user[0].foreign_trip_id).then(\n          (data: GetTripsResponse) => {\n            if (data.status == \"active\") {\n              // update the position\n              // error handling !dont need it anymore\n\n              if (\n                user[0].foreign_trip_id == undefined ||\n                user[0].device_id == undefined\n              ) {\n                console.error(\"undefined users found for user \", user);\n                console.error(\"userData is \", this.userData);\n                return;\n              }\n\n              return this.rest\n                .getUserlocation(user[0].foreign_trip_id, user[0].device_id)\n                .then(\n                  (userPosition: any) => {\n                    console.log(\"REST get/userlocation\", userPosition);\n                    user.position = userPosition.position;\n                    user.position_timestamp = userPosition.position_timestamp;\n                    console.log(\"UserPosition\", userPosition.position);\n                    return user;\n                  },\n                  (error) => {\n                    console.error(\"new user get location error \", error);\n                  }\n                );\n            } else {\n              // delete user from userData array\n              let a = this.userData[index].splice(index, 1);\n              console.log(\"deleted usewr \", a);\n              console.log(\"deleted user~ new array \", this.userData);\n            }\n          },\n          (error) => {\n            console.log(\"Error geting trip status\", error);\n          }\n        );\n      })\n    ).then((array) => {\n      console.log(\"newUsers~ map format\", array);\n      this.updateSwarmArrayInformation(this.userData);\n      setTimeout(() => {\n        this.refresh_users_positions();\n      }, 500);\n    });\n  }\n  /**\n   * this function helps to check in an interval for the new user and calculates distance, time for the checkpoint\n   */\n  Newusers() {\n    // this function is an interval that constantly checks for new users/ and refresh existing users positions\n    try {\n      this.interval2 = setInterval(() => {\n        this.newUser(); // checks for any new user , old user , position and speed update\n        this.dynamicSuggestedSpeedModel(); // updates the dynamic model information for the user for all the checkpoints\n      }, 5000);\n      this.interval2;\n    } catch (error) {\n      alert(\"interval error for new User  \" + error);\n    }\n  }\n\n  ionViewDidEnter() {\n    this.app.fcm_message_broker.subscribe();\n    console.log(\n      \"check before geofence count :\",\n      this.geofenceCount,\n      \"steps \",\n      this.steps.length\n    );\n\n    if (this.platform.is(\"android\")) {\n      this.platform.ready().then(() => {\n        try {\n          this.geofence\n            .onTransitionReceived()\n            .pipe()\n            .subscribe(\n              (resp) => {\n                console.log(\n                  \"----------------------geofence on transition received\",\n                  resp\n                );\n                resp.forEach((element) => {\n                  console.log(\"trips get elemet for geofencing\", element);\n                  if (element[\"id\"] == GConst.meeting_checkppoint_id_outside) {\n                    // this is all logging texts\n                    // the signals and alerts are triggered in the signaling service\n                    this.logText =\n                      this.logText +\n                      new Date().toISOString().substring(11, 19) +\n                      \" Approaching a Swarm in 100 meters\" +\n                      \"\\r\\n\";\n                    this.file\n                      .writeFile(\n                        this.file.externalApplicationStorageDirectory,\n                        this.app.filename,\n                        this.logText,\n                        { append: true }\n                      )\n                      .then(\n                        (suc) => {},\n                        (err) => {}\n                      );\n                    this.writeLogEvents(\n                      \"Approaching a Swarm in 100 meters\",\n                      \"SwarmEvents\"\n                    );\n                    this.object = Object.assign({}, this.table);\n                    this.file\n                      .writeFile(\n                        this.file.externalApplicationStorageDirectory,\n                        this.app.fileEvent,\n                        this.object,\n                        { append: true }\n                      )\n                      .then(\n                        (suc) => {},\n                        (err) => {}\n                      );\n                  }\n                  if (element[\"id\"] == GConst.leaving_checkppoint_id_outside) {\n                    this.logText =\n                      this.logText +\n                      new Date().toISOString().substring(11, 19) +\n                      \" Leaving the Swarm in 100 meters\" +\n                      \"\\r\\n\";\n                    this.file\n                      .writeFile(\n                        this.file.externalApplicationStorageDirectory,\n                        this.app.filename,\n                        this.logText,\n                        { append: true }\n                      )\n                      .then(\n                        (suc) => {},\n                        (err) => {}\n                      );\n                    this.writeLogEvents(\n                      \"Leaving the Swarm in 100 meters\",\n                      \"SwarmEvents\"\n                    );\n                    this.object = Object.assign({}, this.table);\n                    this.file\n                      .writeFile(\n                        this.file.externalApplicationStorageDirectory,\n                        this.app.fileEvent,\n                        this.object,\n                        { append: true }\n                      )\n                      .then(\n                        (suc) => {},\n                        (err) => {}\n                      );\n                  }\n                  if (element[\"id\"] == GConst.destination_id) {\n                    this.logText =\n                      this.logText +\n                      new Date().toISOString().substring(11, 19) +\n                      \" You just reached your Destination\" +\n                      \"\\r\\n\";\n                    this.file\n                      .writeFile(\n                        this.file.externalApplicationStorageDirectory,\n                        this.app.filename,\n                        this.logText,\n                        { append: true }\n                      )\n                      .then(\n                        (suc) => {},\n                        (err) => {}\n                      );\n                    this.writeLogEvents(\n                      \"You just reached your Destination\",\n                      \"TripEvents\"\n                    );\n                    this.object = Object.assign({}, this.table);\n                    this.file\n                      .writeFile(\n                        this.file.externalApplicationStorageDirectory,\n                        this.app.fileEvent,\n                        this.object,\n                        { append: true }\n                      )\n                      .then(\n                        (suc) => {},\n                        (err) => {}\n                      );\n                    setTimeout(() => {\n                      console.log(\"element[id] == 300 go home calles\");\n                      this.goHome(\"completed\");\n                    }, 6000);\n                  }\n                  if (\n                    element[\"radius\"] ==\n                    GConst.leaving_checkppoint_radius_outside\n                  ) {\n                    this.logText =\n                      this.logText +\n                      new Date().toISOString().substring(11, 19) +\n                      \" \" +\n                      resp[0].notification.title +\n                      \" \" +\n                      resp[0][\"notification\"][\"text\"] +\n                      \"\\r\\n\";\n                    this.file\n                      .writeFile(\n                        this.file.externalApplicationStorageDirectory,\n                        this.app.filename,\n                        this.logText,\n                        { append: true }\n                      )\n                      .then(\n                        (suc) => {},\n                        (err) => {}\n                      );\n                    this.writeLogEvents(\n                      element.notification.title +\n                        \" \" +\n                        resp[0][\"notification\"][\"text\"],\n                      \"TurnbyTurnNavigation\"\n                    );\n                    console.log(\"radius 99 \", resp[0][\"notification\"][\"text\"]);\n                    //\n\n                    //\n                    this.object = Object.assign({}, this.table);\n                    this.file\n                      .writeFile(\n                        this.file.externalApplicationStorageDirectory,\n                        this.app.fileEvent,\n                        this.object,\n                        { append: true }\n                      )\n                      .then(\n                        (suc) => {},\n                        (err) => {}\n                      );\n                  }\n                  if (element[\"id\"] == GConst.meeting_checkppoint_id_inner) {\n                    this.card = \"3\";\n                    this.logText =\n                      this.logText +\n                      new Date().toISOString().substring(11, 19) +\n                      \" Just reached Checkpoint\" +\n                      \"\\r\\n\";\n                    this.file\n                      .writeFile(\n                        this.file.externalApplicationStorageDirectory,\n                        this.app.filename,\n                        this.logText,\n                        { append: true }\n                      )\n                      .then(\n                        (suc) => {},\n                        (err) => {}\n                      );\n                    this.writeLogEvents(\n                      \"Just reached Checkpoint\",\n                      \"SwarmEvents\"\n                    );\n                    this.object = Object.assign({}, this.table);\n                    this.file\n                      .writeFile(\n                        this.file.externalApplicationStorageDirectory,\n                        this.app.fileEvent,\n                        this.object,\n                        { append: true }\n                      )\n                      .then(\n                        (suc) => {},\n                        (err) => {}\n                      );\n                  }\n                  if (element[\"id\"] == GConst.leaving_checkppoint_id_inner) {\n                    this.card = \"1\";\n                    this.logText =\n                      this.logText +\n                      new Date().toISOString().substring(11, 19) +\n                      \" Just reached Breakoff point\" +\n                      \"\\r\\n\";\n                    this.file\n                      .writeFile(\n                        this.file.externalApplicationStorageDirectory,\n                        this.app.filename,\n                        this.logText,\n                        { append: true }\n                      )\n                      .then(\n                        (suc) => {},\n                        (err) => {}\n                      );\n                    this.writeLogEvents(\n                      \"Just reached Breakoff point\",\n                      \"SwarmEvents\"\n                    );\n                    this.object = Object.assign({}, this.table);\n                    this.file\n                      .writeFile(\n                        this.file.externalApplicationStorageDirectory,\n                        this.app.fileEvent,\n                        this.object,\n                        { append: true }\n                      )\n                      .then(\n                        (suc) => {},\n                        (err) => {}\n                      );\n                  }\n                });\n                //send the response to the signal service\n                try {\n                  this.signal.signaling(\n                    resp,\n                    this.finalDistance,\n                    this.time,\n                    this.choosenMeetingPoint\n                  );\n                  setTimeout(() => {\n                    this.signal.getNavigationalInformation().then((data) => {\n                      console.log(\"directional message :\", data);\n                      this.navigationMessage = data;\n                      if (this.legInProcess) {\n                        clearInterval(this.legInterval);\n                        this.legInProcess = false;\n                      }\n                      console.log(\"response from geofencing listener\", resp);\n\n                      this.calculateLegdistance(resp);\n\n                      console.log(\n                        \"Navigation information is : \",\n                        this.navigationMessage\n                      );\n                    });\n                    // for navigational signs for UI\n                    this.signal.getNavigationalSigns().then((data) => {\n                      this.directionalIcon = data;\n                      console.log(\n                        \"---------directionalIcon\",\n                        this.directionalIcon\n                      );\n                    });\n                  }, 500);\n                } catch (error) {\n                  console.log(\"Error recieving signaling information \", error);\n                }\n              },\n              (error) => {\n                console.log(\n                  \"error in listening to geofence subscription\",\n                  error\n                );\n              }\n            );\n        } catch (error) {\n          console.log(\"ion view did enter geofence transition recieved\", error);\n        }\n      });\n    }\n\n    this.expectedSwarmsArray;\n\n    try {\n      console.log(\"Loading map .....\");\n\n      this.loadmap();\n    } catch (error) {\n      console.error(\"Error loading map\", error);\n    }\n\n    setTimeout(() => {\n      this.interval1 = setInterval(() => {\n        console.log(\"............... INTERVAL   1......................\");\n        try {\n          this.createCircle();\n        } catch (error) {\n          console.error(\"createcircle error\");\n        }\n        try {\n          this.distanceCalculator();\n        } catch (error) {\n          console.error(\"Distance calc error\", error);\n        }\n        try {\n          this.updateUserPosition();\n        } catch (error) {\n          console.error(\"UpdateUserPosition error\");\n        }\n      }, 3000);\n\n      this.interval1;\n      // initiate the userlist\n      // this.userList = this.users_positions;\n      try {\n        this.Newusers();\n      } catch (error) {\n        console.error(\"error newUser\" + error);\n      }\n    }, 3000);\n  }\n  // here only the updated swarm array list should be passed\n  dynamicSuggestedSpeedModel() {\n    try {\n      let chossed_route_id = this.trip_id;\n      let array = this.expectedSwarmsArray;\n      console.log(\"array\", array);\n      array.forEach(async (element: Users) => {\n        // this is the calculation check for static model\n        // calculate distance for the expexcted swarm\n        console.log(\"element\", element);\n\n        console.log(this.current_position);\n        if (\n          this.current_position.lat == undefined ||\n          this.current_position.lng == undefined\n        ) {\n          console.log(this.current_position);\n          return;\n        }\n\n        var distanceToCover_forSwarm = this.mathModel.getDistanceWithBreakpoint(\n          this.decode(element.foreign_trip_id_geometry),\n          { latitude: element.position.lat, longitude: element.position.lng },\n          this.decode(element.intersection_geometry)[0]\n        );\n        // calculate distance for the user\n        var distanceToCover_forUser = this.mathModel.getDistanceWithBreakpoint(\n          this.decode(element.trip_id_geometry),\n          {\n            latitude: this.current_position.lat,\n            longitude: this.current_position.lng,\n          }, // ! here we need to have current location of the rider\n          this.decode(element.intersection_geometry)[0]\n        );\n        element.user_distanceToCover = distanceToCover_forUser;\n        console.log(\n          \"distave for swarm \",\n          distanceToCover_forSwarm,\n          \"distance for user \",\n          distanceToCover_forUser\n        );\n        // calculate Time required to reach swarm\n        var ETA_forExpectedSwarm = this.mathModel.calculateETADynamic(\n          distanceToCover_forSwarm,\n          element.speed\n        );\n        element.ETA_swarm = ETA_forExpectedSwarm;\n        var ETA_forUser = this.mathModel.calculateETADynamic(\n          distanceToCover_forUser,\n          this.currentSpeed\n        );\n        element.ETA_user = ETA_forUser;\n        element.isAbleToMakeSwarm = this.mathModel.trips_criteria(\n          ETA_forUser,\n          ETA_forExpectedSwarm\n        );\n\n        let suggestedspeed = this.mathModel.calculateSuggestedSpeed(\n          distanceToCover_forUser,\n          ETA_forExpectedSwarm\n        );\n        var length = this.decode(element.intersection_geometry).length;\n        let leavingpoint_distance = this.mathModel.getDistanceWithBreakpoint(\n          this.decode(element.trip_id_geometry),\n          {\n            latitude: this.current_position.lat,\n            longitude: this.current_position.lng,\n          }, // ! here we need to have current location of the rider\n          this.decode(element.intersection_geometry)[length - 1]\n        );\n        element.user_distance_to_leaving_point = leavingpoint_distance;\n        var ETA_toLeavingPoint = this.mathModel.calculateETADynamic(\n          leavingpoint_distance,\n          this.currentSpeed\n        );\n        element.user_ETA_to_leaving_point = ETA_toLeavingPoint;\n        element.suggestedSpeed = suggestedspeed;\n        await element.suggestedSpeed;\n\n        if (this.choosenMeetingPoint !== undefined) {\n          console.log(\"choosen device id \", this.choosenMeetingPoint.device_id);\n          if (this.choosenMeetingPoint.device_id == element.device_id) {\n            this.suggestedSpeed = suggestedspeed * 3.6;\n            this.suggestedSpeed = Math.round(this.suggestedSpeed * 10) / 10;\n\n            console.log(\"for the choosen checkpoint \", this.suggestedSpeed);\n          }\n        }\n\n        console.log(\"suggested speed \", element.suggestedSpeed);\n      });\n      this.refreshMarkerPopup();\n\n      // here the suggested speed will be calculated\n    } catch (error) {\n      alert(\"dynamic error in function \" + error);\n    }\n  }\n  ionViewWillLeave() {\n    console.log(\"ionviewwill leave trips\");\n\n    document.getElementById(\"map_trips\").outerHTML = \"\";\n    //clear intervals, stop map locating before leaving the page\n    console.log(\"clearing interval trips\");\n    clearInterval(this.interval1);\n    clearInterval(this.interval2);\n    clearInterval(this.geoInterval);\n    clearInterval(this.legInterval);\n    this.events.event_stop();\n    // this.swarmMessageSubscription.unsubscibe();\n    // this.checkpointMessageSubscription.unsubscibe();\n    // this.events.set_cercle(2);\n    this.map.stopLocate();\n    if (this.platform.is(\"android\")) {\n      console.log(\"stoping nearbyservices\");\n      NearbyConnections.stopService(\n        function () {\n          console.log(\"[NEARBYCONNECTION] Stopped successful\");\n        },\n        function () {\n          console.error(\"[NEARBYCONNECTION] failed to stop\");\n        },\n        this.rest.deviceId\n      );\n    }\n  }\n  ionViewDidLeave() {\n    console.log(\"ionviewDid leave trips page\");\n    clearInterval(this.interval1);\n    clearInterval(this.interval2);\n    clearInterval(this.geoInterval);\n    clearInterval(this.legInterval);\n    this.app.fcm_message_broker.unsubscribe();\n    if (this.platform.is(\"android\")) {\n      this.geofence.removeAll().then(() => console.log(\"geofence removed\"));\n    }\n  }\n  // it helps to create new checkpoint and geofence for the new user or meeting point and laso draw polyline\n  DrawNewPolyline(Overlapsegeometry) {\n    //draw new polyline when a second user with overlapse joins\n    console.log(\"DrawNewPolyline\");\n    var newMeetlat;\n    var newMeetlng;\n    var newLeavelat;\n    var newLeavelng;\n\n    this.overlapse = this.decode(Overlapsegeometry);\n    var coordinates = this.overlapse.map(\n      (waypoint) => new L.LatLng(waypoint.latitude, waypoint.longitude)\n    );\n\n    this.overlapsePolyline = L.polyline(coordinates, {\n      color: \"green\",\n      weight: 8,\n      opacity: 0.9,\n      lineJoin: \"round\",\n    });\n\n    this.overlapsePolyline.on(\"click\", (e) => {});\n    this.overlapsePolyline.addTo(this.map);\n    //get the new meeting point coords\n    newMeetlat = this.overlapse[0].latitude;\n    newMeetlng = this.overlapse[0].longitude;\n    this.meetptss = {\n      lat: this.overlapse[0].latitude,\n      lng: this.overlapse[0].longitude,\n    };\n    console.log(\"Meeting point:\", this.meetptss);\n    newLeavelat = this.overlapse[this.overlapse.length - 1].latitude; //gets the last latitude of the intersection\n    newLeavelng = this.overlapse[this.overlapse.length - 1].longitude; //gets the last langtitude of the intersection\n    this.leaveptss = { lat: newLeavelat, lng: newLeavelng };\n    console.log(\"Leaving point\", this.leaveptss);\n    let options: NativeGeocoderOptions = {\n      useLocale: true,\n      maxResults: 2,\n      defaultLocale: \"de_DE\",\n    };\n    if (this.platform.is(\"android\")) {\n      //street names\n      this.nativeGeocoder.reverseGeocode(newMeetlat, newMeetlng, options).then(\n        (result) => {\n          if (result[0].thoroughfare == \"\") {\n            this.meetingStreet = result[1].thoroughfare;\n          } else {\n            this.meetingStreet = result[0].thoroughfare;\n          }\n        },\n        (error) => {\n          console.error(\"Error geting street name\", error);\n        }\n      );\n      this.nativeGeocoder\n        .reverseGeocode(newLeavelat, newLeavelng, options)\n        .then(\n          (result) => {\n            if (result[0].thoroughfare == \"\") {\n              this.leavingStreet = result[1].thoroughfare;\n            } else {\n              this.leavingStreet = result[0].thoroughfare;\n            }\n          },\n          (error) => {\n            console.error(\"Error getting street name\", error);\n          }\n        )\n        .then(() => {\n          //new geofences\n          this.addTurnNavigation(\n            GConst.meeting_checkppoint_id_outside,\n            100,\n            newMeetlat,\n            newMeetlng,\n            this.meetingStreet,\n            \"\",\n            \"\",\n            GConst.meeting_checkppoint_radius_outside\n          );\n          this.addTurnNavigation(\n            GConst.leaving_checkppoint_id_outside,\n            400,\n            newLeavelat,\n            newLeavelng,\n            this.leavingStreet,\n            \"\",\n            \"\",\n            GConst.leaving_checkppoint_radius_outside\n          );\n          this.addTurnNavigation(\n            GConst.meeting_checkppoint_id_inner,\n            125,\n            newMeetlat,\n            newMeetlng,\n            this.meetingStreet,\n            \"\",\n            \"\",\n            GConst.checkpoint_radius_inner\n          );\n          this.addTurnNavigation(\n            GConst.leaving_checkppoint_id_inner,\n            425,\n            newLeavelat,\n            newLeavelng,\n            this.leavingStreet,\n            \"\",\n            \"\",\n            GConst.checkpoint_radius_inner\n          );\n        });\n    }\n  }\n  //function create geofences\n  addTurnNavigation(id, idx, lat, lng, modifier, type, str, radius) {\n    if (this.platform.is(\"android\")) {\n      let fencess = [\n        {\n          id: id,\n          latitude: lat,\n          longitude: lng,\n          radius: radius,\n          transitionType: 1,\n          notification: {\n            id: idx,\n            title: type + \" \" + modifier,\n            text: str,\n            openAppOnClick: false,\n          },\n        },\n      ];\n      console.log(\"geofence in addTurn Navigation in trips\");\n      this.platform.ready().then(() => {\n        this.geofence.addOrUpdate(fencess).then(\n          () => console.log(fencess, \"NavigationGeofence added in trip\"),\n          (err) => {\n            console.log(\"Turn Geofences failed to add in trip err\");\n            this.logText =\n              this.logText +\n              new Date().toISOString().substring(11, 19) +\n              \" Turn Geofences failed to add\" +\n              err +\n              \"\\r\\n\";\n          }\n        );\n      });\n    }\n  }\n  /**\n   * TO remopve the polyline\n   */\n  deleteDraw() {\n    console.log(\"DEleteDraw\");\n    this.map.removeLayer(this.overlapsePolyline);\n  }\n\n  /**\n   * loads map on trip page with rote information and markers\n   */\n  loadmap() {\n    console.log(\"in loadmap function \");\n\n    this.map = L.map(\"map_trips\");\n    L.tileLayer(\"http://{s}.tile.osm.org/{z}/{x}/{y}.png\", {}).addTo(this.map);\n\n    this.decodedPolyline = this.decode(this.trip_polyline);\n\n    var coordinates = this.decodedPolyline.map(\n      (waypoint) => new L.LatLng(waypoint.latitude, waypoint.longitude)\n    );\n\n    let polyline = L.polyline(coordinates, {\n      color: \"grey\",\n      weight: 8,\n      opacity: 0.9,\n      lineJoin: \"round\",\n    });\n\n    this.dynamicPolyline = L.polyline([], {\n      color: \"green\",\n      weight: 8,\n      opacity: 0.9,\n      lineJoin: \"round\",\n    });\n\n    polyline.on(\"click\", (e) => {});\n    this.dynamicPolyline.on(\"click\", (e) => {});\n    polyline.addTo(this.map);\n    this.dynamicPolyline.addTo(this.map);\n\n    this.map.fitBounds(polyline.getBounds());\n    L.marker([this.endpoint.lat, this.endpoint.lng], {\n      icon: this.destinationIcon,\n    }).addTo(this.map);\n    L.marker([this.startpoint.lat, this.startpoint.lng], {\n      icon: this.startMarkerIcon,\n    }).addTo(this.map);\n\n    this.marker = new L.Marker();\n    this.marker2 = new L.Marker();\n\n    //watch user\n    this.map\n      .locate({\n        setView: true,\n        enableHighAccuracy: true,\n        watch: true,\n        timeout: 10000,\n        maximumAge: 5000,\n      })\n      .on(\n        \"locationfound\",\n        function (e) {\n          var radius = e.accuracy;\n          // e speed vector unit in m/sec\n          console.log(\"speed\", e.speed);\n          console.log(\"Loadmap position\", e);\n\n          this.currentSpeed = e.speed; //  the unit fom m/sec\n          console.log(\"Location user\", e.latlng);\n          this.marker.setLatLng(e.latlng);\n          this.marker.bindPopup(\n            \"Leaflet locationfound\" + this.marker.getLatLng()\n          );\n          this.marker.setIcon(this.myPositionIcon);\n          this.current_position.lat = e.latlng.lat;\n          this.current_position.lng = e.latlng.lng;\n\n          this.marker.addTo(this.map);\n          try {\n            if (\n              this.choosenMeetingPoint != \"undefined\" &&\n              this.choosenMeetingPoint != undefined\n            ) {\n              // when there is a checkpoint available and selected\n              if (\n                this.choosenMeetingPoint.suggestedSpeed >= 0 &&\n                !Number.isNaN(this.choosenMeetingPoint.suggestedSpeed)\n              ) {\n                let sSpeed = this.choosenMeetingPoint.suggestedSpeed;\n                let SpeedDeviationFactor = 6;\n                let lowerLimit = sSpeed - SpeedDeviationFactor;\n                let upperLimit = sSpeed + SpeedDeviationFactor;\n\n                if (this.showCurrentSpeed < lowerLimit) {\n                  this.showCurrentSpeedColor = \"orange\";\n                } else if (\n                  this.showCurrentSpeed >= lowerLimit &&\n                  this.showCurrentSpeed < upperLimit\n                ) {\n                  this.showCurrentSpeedColor = \"green\";\n                } else {\n                  this.showCurrentSpeedColor = \"red\";\n                }\n              } else {\n                // whne the meeting checkpoint has already been crossed\n                this.showCurrentSpeedColor = \"black\";\n              }\n            } else {\n              // when no checkpoint is give or selected\n              this.showCurrentSpeedColor = \"black\";\n            }\n          } catch (error) {\n            console.error(\"Speed UI error : \", error);\n          }\n          if (\n            Number.isNaN(this.currentSpeed) ||\n            this.currentSpeed == undefined ||\n            this.currentSpeed == null\n          ) {\n            this.gaugeValue = 0;\n            this.currentSpeed = 0;\n            this.showCurrentSpeed = this.currentSpeed;\n          } else {\n            this.showCurrentSpeed = this.currentSpeed * 3.6; // convert in kph\n            this.showCurrentSpeed = Math.round(this.showCurrentSpeed * 10) / 10;\n          }\n\n          if (this.cercleFlag) {\n            this.c.setLatLng(e.latlng);\n          }\n          if (radius > 150) {\n            this.accuracyMarkerFlag = true;\n            this.marker.bindPopup(\"Low accuracy\").openPopup();\n          } else {\n            if (this.accuracyMarkerFlag) {\n              // this.accuracyMarker.remove()\n              this.marker.closePopup();\n            }\n            this.accuracyMarkerFlag = !this.accuracyMarkerFlag;\n          }\n        },\n        this\n      );\n    this.map.on(\n      \"locationerror\",\n      function (e) {\n        this.onLocationError();\n        this.geolocation\n          .getCurrentPosition({\n            enableHighAccuracy: true,\n            timeout: 20000,\n            maximumAge: 10000,\n          })\n          .then((resp) => {\n            this.current_position.lat = resp.coords.latitude;\n            this.current_position.lng = resp.coords.longitude;\n            // update the marker\n            if (this.marker) {\n              this.marker.setLatLng({\n                lat: this.current_position.lat,\n                lng: this.current_position.lng,\n              });\n            }\n          })\n          .catch((error) => {\n            console.error(\"Error with geolocation\");\n          });\n      },\n      this\n    );\n    // --------------------\n\n    // stop following the icon when clicked on map\n    const click = this.map.on(\"drag\", (e) => {\n      //console.log(\"following icon has been turned off\")\n\n      //console.log(\"event is \", e)\n      this.map.locate({ setView: false });\n      this.cameraTracker = false;\n      // console.log(\"cameraTracker\", this.cameraTracker);\n    });\n\n    // Add all the meeting points\n    try {\n      this.createCheckpoints();\n    } catch (error) {\n      console.log(\"error creating checkpoints\", error);\n    }\n  }\n  legInterval;\n  legInProcess: boolean = false;\n  /**\n   * this function helps to calculate leg distance untill the next leg is listened from the geofence\n   * @param resp data of geofence for turns geocoordinates\n   */\n\n  calculateLegdistance(resp) {\n    try {\n      this.legInProcess = true; // flag for the distance calculation\n      let path = this.decode(this.trip_polyline);\n      this.legInterval = setInterval(() => {\n        let distance_of_leg = this.mathModel.getDistanceWithBreakpoint(\n          path,\n          {\n            latitude: this.current_position.lat,\n            longitude: this.current_position.lng,\n          },\n          { latitude: resp[0].latitude, longitude: resp[0].longitude }\n        );\n        if (distance_of_leg >= 0) {\n          this.navigationCalculation = Math.ceil(distance_of_leg / 10) * 10;\n        } else {\n          this.navigationCalculation = 0;\n        }\n      }, 2000);\n    } catch (error) {\n      console.error(\"error calculating leg distance\", error);\n    }\n  }\n  // creates all checkpoints geofence and related marker and UI\n  createCheckpoints() {\n    console.log(\"creatingcheckpoints\");\n\n    let arr = this.expectedSwarmsArray;\n    arr.forEach((element: Users) => {\n      let marker;\n      marker = new L.Marker();\n\n      marker.setIcon(this.meetingPointIconDefault);\n      let a = this.decode(element.intersection_geometry)[0];\n      marker.setLatLng([a.latitude, a.longitude]);\n      // ! might need better infotmation on the popup\n      marker.bindPopup(\"Loading...\", {\n        closeButton: false,\n        className: \"checkpointPopUp\",\n      });\n      marker.addTo(this.map);\n      element.checkpointMarker = marker;\n      // leaving point marker\n      let decode = this.decode(element.intersection_geometry);\n      let b = decode[decode.length - 1];\n      let leaveMarker = new L.Marker();\n      leaveMarker.setIcon(this.leavingPointIcondeactive);\n      leaveMarker.setLatLng([b.latitude, b.longitude]);\n      leaveMarker.addTo(this.map);\n      element.leavingMarker = leaveMarker;\n\n      let overlap = this.decode(element.intersection_geometry);\n      var coordinates = overlap.map(\n        (waypoint) => new L.LatLng(waypoint.latitude, waypoint.longitude)\n      );\n      element.intersection_polyline_LatLngs = coordinates;\n      // condition when default selection happens when transiting from tripproposals page to trips page\n      if (this.choosenMeetingPoint.device_id == element.device_id) {\n        this.suggestedSpeed = this.choosenMeetingPoint.suggestedSpeed * 3.6;\n        this.suggestedSpeed = Math.round(this.suggestedSpeed * 10) / 10;\n        this.distance_to_meet_checkpoint = element.user_distanceToCover;\n        this.dynamicPolyline.setLatLngs(element.intersection_polyline_LatLngs);\n        marker.setIcon(this.meetingPointIconActive);\n        leaveMarker.setIcon(this.leavingPointIconActive);\n      }\n      // user position marker\n      try {\n        let userPositionMarker = new L.Marker();\n        let a = L.icon({\n          iconUrl: \"../assets/content/images/swarm1.png\",\n          iconSize: [32, 32], // size of the icon\n        });\n        userPositionMarker.setIcon(this.otherUserPosition);\n        console.log();\n        console.log(\"other user position \", element);\n        userPositionMarker.setLatLng({\n          lat: element.position.lat,\n          lng: element.position.lng,\n        });\n        console.log();\n\n        userPositionMarker.addTo(this.map);\n        element.marker = userPositionMarker;\n        // contains information about the user and its checkpoint\n        this.checkPointMarkerArray.push({\n          checkpointmarker: marker,\n          userMarker: userPositionMarker,\n          leavingMarker: leaveMarker,\n        });\n      } catch (error) {\n        console.error(\"errior generating user marker \", error);\n      }\n\n      // marker are clickable\n      marker.on(\n        \"click\",\n        async function () {\n          // ! undo selected marker\n          this.undoSelection(this.choosenMeetingPoint);\n          console.log(\"marker clicked\", marker);\n          console.log(element);\n          this.choosenMeetingPoint = element;\n          this.choosenMeetingPoint;\n          this.suggestedSpeed = element.suggestedSpeed * 3.6;\n          this.suggestedSpeed = Math.round(this.suggestedSpeed * 10) / 10;\n          this.distance_to_meet_checkpoint = element.user_distanceToCover;\n          marker.setIcon(this.meetingPointIconActive);\n          element.leavingMarker.setIcon(this.leavingPointIconActive);\n          console.log(\"selected meeting point \", element);\n\n          console.log(\"switching polyline\");\n          // this code snippet helps to dynamically change the polyline for the user for the choosen checkpoint\n\n          this.dynamicPolyline.setLatLngs(\n            element.intersection_polyline_LatLngs\n          );\n        },\n        this\n      );\n      console.log(\"from checkpoint\", element);\n    });\n  }\n  // this function helps to undo the selected marker by updating the unselected checkpoint icon\n  undoSelection(meetingpoint) {\n    if (\n      meetingpoint &&\n      meetingpoint != null &&\n      meetingpoint != undefined &&\n      meetingpoint != \"undefined\"\n    ) {\n      let selected = meetingpoint.checkpointMarker;\n      selected.setIcon(this.meetingPointIconDefault);\n      let leaveSelected = meetingpoint.leavingMarker;\n      leaveSelected.setIcon(this.leavingPointIcondeactive);\n\n      // animation stop can be done here\n    }\n  }\n\n  /**\n   *\n   * @param element User element from the expectedswarm array which needs to be deleted\n   *\n   * @returns void\n   *\n   * It helps to remove checkpoint from the map and accordinly update the other checkpoint\n   * arrays\n   */\n  deleteCheckpoint(element: Users) {\n    // remove checkpoint marker\n    let marker = element.checkpointMarker;\n    // delete from the global marker array\n    let index = this.checkPointMarkerArray.findIndex(function (data) {\n      return marker._leaflet_id == data.checkpointmarker._leaflet_id;\n    });\n    this.checkPointMarkerArray.splice(index, 1);\n    // remove from the marker array\n    element.checkpointMarker.remove();\n    element.leavingMarker.remove();\n    this.map.removeLayer(element.marker);\n    this.map.removeLayer(element.leavingMarker);\n    // element.marker.remove()\n    // remove from the array of expected swarms\n    let i = this.expectedSwarmsArray.findIndex(function (data) {\n      return data.device_id == element.device_id;\n    });\n\n    this.expectedSwarmsArray.splice(i, 1);\n    console.log(\"Updated swarm array \", this.expectedSwarmsArray);\n    // if the deleted swarm is the choosen one\n    console.log(\n      \"deleting for element\",\n      element,\n      \"checkpoint at this point \",\n      this.choosenMeetingPoint\n    );\n    if (\n      this.expectedSwarmsArray.length !== 0 &&\n      this.choosenMeetingPoint != undefined\n    ) {\n      if (this.choosenMeetingPoint.device_id == element.device_id) {\n        this.dynamicPolyline.setLatLngs([]);\n        this.suggestedSpeed = undefined;\n        this.distance_to_meet_checkpoint = 0;\n        if (this.expectedSwarmsArray.length !== 0) {\n          this.choosenMeetingPoint = this.expectedSwarmsArray[0];\n          this.choosenMeetingPoint.checkpointMarker.setIcon(\n            this.meetingPointIconActive\n          );\n          this.choosenMeetingPoint.leavingMarker.setIcon(\n            this.leavingPointIconActive\n          );\n          this.dynamicPolyline.setLatLngs(\n            this.choosenMeetingPoint.intersection_polyline_LatLngs\n          );\n        } else {\n          this.choosenMeetingPoint = undefined;\n        }\n      }\n    } else {\n      console.log(\"length\", this.expectedSwarmsArray.length);\n      console.log(this.choosenMeetingPoint);\n      this.choosenMeetingPoint = undefined;\n      this.dynamicPolyline.setLatLngs([]);\n      this.suggestedSpeed = undefined;\n      this.distance_to_meet_checkpoint = 0;\n    }\n  }\n\n  getRandomArbitrary(min, max) {\n    return Math.random() * (max - min) + min;\n  }\n  /**\n   * @return void - it updates users own position and speed\n   */\n  updateUserPosition(): void {\n    let pos = {\n      lat: this.current_position.lat,\n      lng: this.current_position.lng,\n    };\n    console.log(\"update own position\");\n    console.warn(\"Position is \", pos);\n    if (pos.lat !== undefined && pos.lng !== undefined) {\n      if (\n        this.currentSpeed == null ||\n        this.currentSpeed == undefined ||\n        this.currentSpeed < 0 ||\n        Number.isNaN(this.currentSpeed)\n      ) {\n        // ! take a look\n        this.currentSpeed = 0;\n      }\n\n      this.rest\n        .postUserlocation(\n          this.trip_id,\n          this.rest.userId,\n          pos,\n          this.currentSpeed\n        )\n        .then(\n          (data) => {\n            console.log(\"user position updated\", data);\n          },\n          (error) => {\n            console.error(\"Error updarting user position:\", error);\n          }\n        );\n    } else {\n      console.error(\"Users Postion undefined\");\n    }\n  }\n  createCircle() {\n    // here all the circle action hapens to show if the user is in swarm\n    try {\n      if (this.events.getUpdated_cercle() == 1) {\n        this.cercleFlag = true;\n        this.showSwarmInformation = true;\n        this.border_color = \"orange\";\n        this.numberOfMembersInSwarm = this.events.getSwarmLength();\n\n        this.c.setLatLng({\n          lat: this.current_position.lat,\n          lng: this.current_position.lng,\n        });\n        this.c.setRadius(50);\n        this.c.addTo(this.map);\n        this.c.setStyle({ color: \"yellow\" });\n        this.suggestedSpeed = undefined;\n      } else if (this.events.getUpdated_cercle() == 2) {\n        // Case : not in swarm\n        // console.log(\"NO circle present\");\n        this.border_color = \"white\";\n        this.showSwarmInformation = false;\n        this.numberOfMembersInSwarm = 0;\n        this.cercleFlag = false;\n        this.c.remove();\n      }\n    } catch (error) {\n      alert(\"Error generated while creating a circle error : \" + error);\n    }\n  }\n  /**\n   * returns an error when geolocation can not fetch user location\n   */\n  async onLocationError() {\n    console.error(\"error geting map location \");\n    /* let toast = await this.toastController.create({\n      message: \"ERROR getting geolocation\",\n      position: \"middle\",\n      duration: 4000,\n    }); */\n    //  await toast.present();\n  }\n  /**\n   * It again brings the screen of the user to current user's location ~ Go to current GPS location\n   * @param $event map click event or gps relocation button event\n   */\n  switchoncamera($event) {\n    this.cameraTracker = true;\n    this.map.setView({\n      lat: this.current_position.lat,\n      lng: this.current_position.lng,\n    });\n    this.map.locate({ setView: true });\n  }\n\n  load_positions(positions) {\n    console.log(\"user positions are \", positions);\n  }\n\n  goHome(tripstatus) {\n    //stop services and mark trip and user as done\n    console.log(\"clicked on go home \");\n    if (this.platform.is(\"android\")) {\n      NearbyConnections.stopService(\n        function () {},\n        function () {},\n        this.rest.deviceId\n      );\n    }\n\n    // ! dont need anymore\n    if (\n      this.currentSpeed == null ||\n      this.currentSpeed == undefined ||\n      this.currentSpeed < 0 ||\n      Number.isNaN(this.currentSpeed)\n    ) {\n      // ! take a look\n      this.currentSpeed = 0;\n    }\n\n    this.rest\n      .putTrips(this.trip_id, tripstatus)\n      .then(\n        (data) => console.log(\"Quiting trip\", data),\n        (error) => {\n          console.error(\"Error \", tripstatus, \"trip\");\n        }\n      )\n      .catch((error) => {\n        this.logText =\n          this.logText +\n          new Date().toISOString().substring(11, 19) +\n          \" Error: \" +\n          error +\n          \"\\r\\n\";\n        this.file.writeFile(\n          this.file.externalApplicationStorageDirectory,\n          this.app.filename,\n          this.logText,\n          { append: true }\n        );\n      });\n    this.transfer.last_trip_deleted_successfully = true;\n    this.storage.set(\"last_trip_deleted_successfully\", true);\n    this.map.off();\n    this.map.remove();\n    console.log(\"navigating started\");\n    this.navCtrl.navigateRoot(\"/home\").catch((error) => {\n      this.logText =\n        this.logText +\n        new Date().toISOString().substring(11, 19) +\n        \" Error: \" +\n        error +\n        \"\\r\\n\";\n      this.file\n        .writeFile(\n          this.file.externalApplicationStorageDirectory,\n          this.app.filename,\n          this.logText,\n          { append: true }\n        )\n        .then(\n          (suc) => {},\n          (err) => {}\n        );\n    });\n  }\n\n  // function to decode trip geometr into waypoints\n  decode(encoded) {\n    // array that holds the points\n\n    var points = [];\n    var index = 0,\n      len = encoded.length;\n    var lat = 0,\n      lng = 0;\n    while (index < len) {\n      var b,\n        shift = 0,\n        result = 0;\n      do {\n        b = encoded.charAt(index++).charCodeAt(0) - 63; //finds ascii                                                                                    //and substract it by 63\n        result |= (b & 0x1f) << shift;\n        shift += 5;\n      } while (b >= 0x20);\n\n      var dlat = (result & 1) != 0 ? ~(result >> 1) : result >> 1;\n      lat += dlat;\n      shift = 0;\n      result = 0;\n      do {\n        b = encoded.charAt(index++).charCodeAt(0) - 63;\n        result |= (b & 0x1f) << shift;\n        shift += 5;\n      } while (b >= 0x20);\n      var dlng = (result & 1) != 0 ? ~(result >> 1) : result >> 1;\n      lng += dlng;\n\n      points.push({ latitude: lat / 1e5, longitude: lng / 1e5 });\n    }\n    return points;\n  }\n  // this function calculate the distance between the current position of the user and his arrival point\n  distanceCalculator() {\n    try {\n      if (this.choosenMeetingPoint) {\n        this.reachable = this.choosenMeetingPoint.isAbleToMakeSwarm;\n        this.numberCheck(this.choosenMeetingPoint.suggestedSpeed);\n        if (this.reachable) {\n          this.footerColor = \"green\";\n        } else {\n          this.footerColor = \"red\";\n        }\n      }\n    } catch (e) {\n      console.error(\"Distance calc error\", e);\n    }\n\n    if (\n      this.current_position.lat == this.endpoint.lat &&\n      this.current_position.lng == this.endpoint.lng\n    ) {\n      this.distance = 0;\n      return 0;\n    } else {\n      if (!this.decodedPolyline) {\n        console.warn(\n          \"Decoded polyline has not been initialized, initializing....\"\n        );\n        this.decodedPolyline = this.decode(this.trip_polyline);\n      }\n      //find the nearest point to you in the polyline based from your waypoints\n      this.closest = findNearest(this.current_position, this.decodedPolyline);\n      var i = this.decodedPolyline.indexOf(this.closest);\n      console.warn(\":distance calculator\", this.decodedPolyline);\n\n      // calculating distance to the checkpoint\n      let currP;\n      try {\n        let currentPolyline = this.decodedPolyline.slice(i);\n        currP = currentPolyline;\n        var d = getPathLength(currentPolyline);\n        let length = this.decodedPolyline.length;\n        // console.log(\"total path length \", d);\n        this.distance = this.mathModel.getDistanceWithBreakpoint(\n          this.decodedPolyline,\n          {\n            latitude: this.current_position.lat,\n            longitude: this.current_position.lng,\n          },\n          this.decodedPolyline[length - 1]\n        );\n\n        let ETA = this.mathModel.calculateETADynamic(\n          this.distance,\n          this.currentSpeed\n        );\n        this.yourETA = ETA;\n\n        var dista = d;\n\n        console.log(\"yourETA\", this.yourETA, \"distance\", this.distance);\n      } catch (error) {\n        console.error(\"Distance calc error \", error);\n      }\n    }\n  }\n  /**\n   * updates other user position on the map\n   */\n  refresh_users_positions() {\n    try {\n      let array: Users[] = this.expectedSwarmsArray;\n\n      for (var i = 0; i <= array.length - 1; i++) {\n        try {\n          if (array[i].marker == undefined) {\n            array[i].marker = new L.marker();\n            if (array[i].position != undefined) {\n              array[i].marker\n                .setIcon(this.otherUserPosition)\n                .array[i].marker.setLatLng({\n                  lat: array[i].position.lat,\n                  lng: array[i].position.lng,\n                });\n              array[i].marker.addTo(this.map);\n            }\n          }\n        } catch (error2) {\n          console.error(\"error updating user position~intialization\", error2);\n        }\n        if (array[i].position != undefined) {\n          array[i].marker.setLatLng({\n            lat: array[i].position.lat,\n            lng: array[i].position.lng,\n          });\n        }\n      }\n    } catch (error) {\n      // alert(\"refresh error generated \"+ error)\n      console.error(\"error for updating user position\", error);\n    }\n  }\n  /**\n   * refreshing marker popup information dynamically\n   */\n  refreshMarkerPopup() {\n    let array = this.expectedSwarmsArray;\n    array.forEach((element) => {\n      let marker = element.checkpointMarker;\n      if (marker) {\n        let a = marker.getPopup().getContent();\n        let reachable = \"\";\n        if (element.isAbleToMakeSwarm) {\n          reachable = \"Yes\";\n        } else {\n          reachable = \"No\";\n        }\n        let recommended_speed = this.mathModel.calculateSuggestedSpeed(\n          element.user_distanceToCover,\n          element.ETA_swarm\n        );\n        recommended_speed *= 3.6;\n\n        let popupContent =\n          \"<div background-color ='black'>Reachable :\" +\n          reachable +\n          \"<br/>\" +\n          \"Distance to checkpoint: \" +\n          element.user_distanceToCover +\n          \" m\" +\n          \"</br>\" +\n          \"ETA :\" +\n          element.ETA_user +\n          \" sec\" +\n          \"<br/>\" +\n          \"Recommended Speed \" +\n          Math.round(recommended_speed * 10) / 10 +\n          \" km/hr\" +\n          \"</div>\";\n        marker.getPopup().setContent(popupContent);\n        marker.getPopup().update();\n      }\n    });\n  }\n  /**\n   * @not_in_use no notification to show for user\n   */\n  async NewUserAlert() {\n    console.log(\"newuseralert trip\");\n    let alert = await this.alertCtrl.create({\n      subHeader: \"A new Biker is joining your Trip !\",\n      buttons: [\"Ok\"],\n    });\n    alert.present();\n    setTimeout(() => {\n      alert.dismiss();\n    }, 3000);\n  }\n  /**\n   * an alert which prompts teh suer to select if user wants to quit the trip\n   */\n  async presentAlert() {\n    console.log(\" [alert]  present \");\n    //this.events.publish('log');\n    let alert = await this.alertCtrl.create({\n      header: \"Leave the trip\",\n      subHeader: \"Do you want to leave the trip ?\",\n      buttons: [\n        \"Dismiss\",\n        {\n          text: \"Yes\",\n          handler: () => {\n            if (this.platform.is(\"android\")) {\n              this.writeLogs();\n            }\n            this.goHome(\"aborted\");\n          },\n        },\n      ],\n    });\n    alert.present();\n  }\n\n  /**\n   * @return {void}\n   * it generates geofence for route navigation information on UI level of application\n   */\n  geofenceTurns() {\n    console.log(\"initializing geofence for all turns in steps\");\n    console.log(\"steps in trips are \", this.steps);\n    let fences = [];\n\n    this.steps.forEach((element, index) => {\n      console.log(\"geofence steps plugin\", element);\n      if (this.geofenceDebug) {\n        let c = new L.circle();\n        c.setLatLng({\n          lat: element.maneuver.location[1],\n          lng: element.maneuver.location[0],\n        });\n        c.setRadius(GConst.navigational_radius);\n        c.addTo(this.map);\n        c.setStyle({ color: \"blue\" });\n        c.bindPopup(\n          \"element\" + element.maneuver.type + \" \" + element.maneuver.modifier\n        );\n      }\n      if (\n        element.maneuver.type == \"new name\" ||\n        element.maneuver.type == \"notification\"\n      ) {\n        element.maneuver.type = \"continue\";\n      }\n      let icon = \"../assets/content/images/route.png\";\n      if (\n        element.maneuver.type == \"turn\" &&\n        element.maneuver.modifier == \"right\"\n      ) {\n        icon = \"../assets/content/images/turnRight.png\";\n      }\n      if (\n        element.maneuver.type == \"turn\" &&\n        element.maneuver.modifier == \"left\"\n      ) {\n        icon = \"../assets/content/images/turnLeft.png\";\n      }\n      if (this.platform.is(\"android\")) {\n        let fence = {\n          id: index + 1,\n          latitude: element.maneuver.location[1],\n          longitude: element.maneuver.location[0],\n          radius: GConst.navigational_radius,\n          transitionType: 1, // transition value for entering geofence radius\n          notification: {\n            id: index + 1,\n            title: element.maneuver.type + \" \" + element.maneuver.modifier,\n            text: element.name,\n            openAppOnClick: false,\n            icon: icon,\n            data: {\n              type: element.maneuver.type,\n              modifier: element.maneuver.modifier,\n              name: element.name,\n            },\n          },\n        };\n        fences.push(fence);\n        // for the next step transition - used for data to be shown as soon as the last transition is finished\n        // and user doesn't have to wait for next transition to show the data for the next step.\n        if (index + 1 <= this.steps.length - 1) {\n          let leg = this.steps[index + 1];\n          let element2 = leg;\n          if (this.geofenceDebug) {\n            let c = new L.circle();\n            c.setLatLng({\n              lat: element2.maneuver.location[1],\n              lng: element2.maneuver.location[0],\n            });\n            c.setRadius(GConst.navigational_leave_radius);\n            c.addTo(this.map);\n            c.setStyle({ color: \"red\" });\n            c.bindPopup(\n              \"element\" +\n                element2.maneuver.type +\n                \" modifier\" +\n                element2.maneuver.modifier +\n                \" name\" +\n                element.name\n            );\n          }\n          if (\n            element2.maneuver.type == \"new name\" ||\n            element2.maneuver.type == \"notification\"\n          ) {\n            element2.maneuver.type = \"continue\";\n          }\n          let icon = \"../assets/content/images/route.png\";\n          if (\n            element2.maneuver.type == \"turn\" &&\n            element2.maneuver.modifier == \"right\"\n          ) {\n            icon = \"../assets/content/images/turnRight.png\";\n          }\n          if (\n            element2.maneuver.type == \"turn\" &&\n            element2.maneuver.modifier == \"left\"\n          ) {\n            icon = \"../assets/content/images/turnLeft.png\";\n          }\n\n          let fence_leave_next_leg = {\n            id: index + 100,\n            latitude: element2.maneuver.location[1],\n            longitude: element2.maneuver.location[0],\n            radius: GConst.navigational_leave_radius,\n            transitionType: 2, // transition value while exiting geofence - used for listening\n            notification: {\n              id: index + 100,\n              title: element2.maneuver.type + \" \" + element2.maneuver.modifier,\n              text: element2.name,\n              openAppOnClick: false,\n              icon: icon,\n              data: {\n                type: element2.maneuver.type,\n                modifier: element2.maneuver.modifier,\n                name: element2.name,\n              },\n            },\n          };\n          fences.push(fence_leave_next_leg);\n        }\n\n        if (\n          element.maneuver.type.includes(\"undefined\") &&\n          element.maneuver.type == \"\" &&\n          element.maneuver.modifier.includes(\"undefined\") &&\n          element.maneuver.modifier == \"\"\n        ) {\n          console.error(\"undefined geofence notification alert \", element);\n        }\n      }\n    });\n\n    console.log(\"fences are \", fences);\n    if (this.platform.is(\"android\")) {\n      this.platform.ready().then((succ) => {\n        try {\n          this.geofence.addOrUpdate(fences).then(\n            (success) => {\n              console.log(\"fences added\", fences);\n            },\n            (error) => {\n              console.log(\"error creating geofences \", error);\n            }\n          );\n        } catch (error) {\n          console.log(\"error creating geofences\", error);\n        }\n      });\n    }\n    console.log(\"done initializing the geofence\");\n  }\n\n  // function to add geofences from tripproposal\n  async addpoint() {\n    //geofence for all the checkpoint or point of intersection\n\n    if (this.platform.is(\"android\")) {\n      let array = this.expectedSwarmsArray;\n      let fences = [];\n      array.forEach((element, index) => {\n        let meetlat = element.intersection_polyline_LatLngs[0].lat;\n        let meetlng = element.intersection_polyline_LatLngs[0].lng;\n        let leavelng =\n          element.intersection_polyline_LatLngs[\n            element.intersection_polyline_LatLngs.length - 1\n          ].lng;\n        let leavelat =\n          element.intersection_polyline_LatLngs[\n            element.intersection_polyline_LatLngs.length - 1\n          ].lat;\n\n        let meetfence_outside = {\n          id:\n            GConst.meeting_checkppoint_id_outside +\n            \".\" +\n            element.foreign_trip_id,\n          latitude: meetlat,\n          longitude: meetlng,\n          radius: GConst.meeting_checkppoint_radius_outside,\n          transitionType: 1,\n          notification: {\n            id: index,\n            title: \"\",\n            text: \"\",\n            openAppOnClick: false,\n          },\n        };\n        fences.push(meetfence_outside);\n        let meetfence_inside = {\n          id:\n            GConst.meeting_checkppoint_id_inner + \".\" + element.foreign_trip_id,\n          latitude: meetlat,\n          longitude: meetlng,\n          radius: GConst.checkpoint_radius_inner,\n          transitionType: 1,\n          notification: {\n            id: index,\n            title: \"\",\n            text: \"\",\n            openAppOnClick: false,\n          },\n        };\n        fences.push(meetfence_inside);\n        let leavefence_outside = {\n          id:\n            GConst.leaving_checkppoint_id_outside +\n            \".\" +\n            element.foreign_trip_id,\n          latitude: leavelat,\n          longitude: leavelng,\n          radius: GConst.leaving_checkppoint_radius_outside,\n          transitionType: 1,\n          notification: {\n            id: index,\n            title: \"\",\n            text: \"\",\n            openAppOnClick: false,\n          },\n        };\n        fences.push(leavefence_outside);\n        let leavefence_inside = {\n          id:\n            GConst.leaving_checkppoint_id_inner + \".\" + element.foreign_trip_id,\n          latitude: leavelat,\n          longitude: leavelng,\n          radius: GConst.checkpoint_radius_inner,\n          transitionType: 1,\n          notification: {\n            id: index,\n            title: \"\",\n            text: \"\",\n            openAppOnClick: false,\n          },\n        };\n        fences.push(leavefence_inside);\n      });\n\n      // TODO : add geofence in database - *done*\n      try {\n        this.geofence.addOrUpdate(fences).then(\n          (success) => {\n            console.log(\"fences added\", fences);\n          },\n          (error) => {\n            console.log(\"error creating geofences \", error);\n          }\n        );\n      } catch (error) {\n        console.log(\"error creating geofences\", error);\n      }\n    }\n  }\n  /**\n   * add destination geofence\n   */\n  addDestinationGeofence() {\n    // geofence for destination reached\n    this.addTurnNavigation(\n      GConst.destination_id,\n      300,\n      this.lastPointRoute.latitude,\n      this.lastPointRoute.longitude,\n      this.endTripStreet,\n      \"\",\n      \"\",\n      GConst.destination_radius\n    );\n  }\n\n  //writelog\n  writeLogEvents(event, eventtype) {\n    this.coordonate = {\n      position_timestamp: new Date().toISOString(),\n      userID: this.rest.userId,\n      Position: this.current_position,\n      Event: event,\n      EventType: eventtype,\n    };\n    this.table.push(this.coordonate);\n    // console.log(this.coordonate);\n    // console.log(this.table);\n  }\n  //write logs\n  writeLogs() {\n    let prevLog = this.prev;\n    let __this: TripsPage = this;\n    NativeLogs.getLog(10000, true, function (_logs) {\n      __this.logg = prevLog + _logs;\n    });\n    setTimeout(() => {\n      this.file\n        .writeFile(\n          this.file.externalApplicationStorageDirectory,\n          this.app.filelog,\n          this.logg,\n          { append: true }\n        )\n        .then(\n          (suc) => {},\n          (err) => {}\n        );\n      this.prev = this.logg;\n    });\n  }\n  /**\n   * checks if the input is a not a number\n   */\n  numberCheck(s) {\n    this.showsecondline = Number.isNaN(s);\n  }\n\n  // TODO : a subscriber function for all the properties shown in UI\n  // TODO : showSpeed, suggestedSpeed // later on distance and time for units change\n  // not implemented in teh code\n  showCurrentSpeedSubscription = new BehaviorSubject<any>(this.currentSpeed);\n  ui_showCurrentSpeed = this.showCurrentSpeedSubscription.asObservable();\n  uiShowSubscriptions() {\n    // current speed subscription\n    this.ui_showCurrentSpeed.pipe().subscribe((speed) => {\n      // speed= this.\n    });\n\n    if (!this.choosenMeetingPoint) {\n      // suggested speed and everything else\n    }\n  }\n}\n"],"names":["ChangeDetectorRef","Component","ViewChild","DeviceOrientation","File","Geolocation","NativeGeocoder","Geofence","AlertController","NavController","NavParams","Platform","AppComponent","Events","RestApiService","SignalingService","findNearest","getPathLength","TransferService","StorageService","GlobalConstants","GConst","MathematicalModel","OutputControllerService","Global","BehaviorSubject","NgxGauge","TripsPage","constructor","events","alertCtrl","navCtrl","navParams","rest","geolocation","platform","geofence","signal","ref","file","app","nativeGeocoder","transfer","storage","mathModel","outputCtrl","global","gauge","L","icon","iconUrl","iconSize","circle","position_timestamp","Date","toISOString","substring","userID","userIDs","Position","position","EventType","eventType","Event","event","lat","lng","undefined","color","bgOpacity","size","label","type","suggestedSpeed","currentSpeed","showCurrentSpeedSubscription","asObservable","console","log","userId","loadInformation","is","ready","then","NearbyConnections","logText","writeFile","externalApplicationStorageDirectory","filename","append","startService","deviceId","listenConnections","success","groupDBController","initialize","err","deviceorientation","e","offline","steps","_getNavSteps","distance","_getTripDistance","startpoint","_getStartPosition","endpoint","_getDestinationPosition","trip_id","_getRouteID","trip_polyline","_getRouteGeometry","meetingStreet","_getMeetingStreet","leavingStreet","_getleavingStreet","meetlat","_getMeetingPoint","meetlng","meetptss","leavelat","_getLeavingPoint","leavelng","leaveptss","overlapse","_getOverlapse","_getLogText","endTripStreet","_getEndTripStreet","lastPointRoute","_getLastPointRoute","expectedSwarmsArray","_getExpectedSwarmArray","length","choosenMeetingPoint","decode","intersection_geometry","userData","_getUserList","error","goHome","window","location","reload","ngOnInit","detectChanges","addDestinationGeofence","setTimeout","geofenceTurns","addpoint","suc","checkpointMessageSubscription","_cast_checkpoint_alert","pipe","subscribe","message","checkpointMessage","swarmMessageSubscription","_cast_swarm_alert","swarmMessage","fcmSubscriber","updateSwarmArrayInformation","data","old_array","new_array","warn","i","item","users","device_id","element","found","findIndex","datanew","obj","trip_id_geometry","foreign_trip_id","swarm_id","intersection_distance","toString","trim","split","intersections","speed","generateColor","getTrips","tripData","foreign_trip_id_geometry","geometry","catch","push","createCheckpoint","updatingUser","deleteCheckpoint","forEach","new_device_id","element2","marker","Marker","setIcon","meetingPointIconDefault","a","setLatLng","latitude","longitude","bindPopup","closeButton","className","addTo","map","checkpointMarker","b","leaveMarker","leavingPointIcondeactive","leavingMarker","overlap","coordinates","waypoint","LatLng","intersection_polyline_LatLngs","userPositionMarker","otherUserPosition","checkPointMarkerArray","checkpointmarker","userMarker","meetingPointIconActive","leavingPointIconActive","dynamicPolyline","setLatLngs","on","undoSelection","Math","round","distance_to_meet_checkpoint","user_distanceToCover","swarmPointIconBig","createGeofence","manualNavigation","decodedPolyline","current_position","currentLeg","currentLegIndex","navigationMessage","checkNavigationInformation","maneuver","name","modifier","NavigationalInterval","setInterval","getDistanceWithBreakpoint","legDistance","navigationCalculation","ceil","clearInterval","fences","arr","index","elem","meetfence_outside","id","meeting_checkppoint_id_outside","radius","meeting_checkppoint_radius_outside","transitionType","notification","title","text","openAppOnClick","meetfence_inside","meeting_checkppoint_id_inner","checkpoint_radius_inner","leavefence_outside","leaving_checkppoint_id_outside","leaving_checkppoint_radius_outside","leavefence_inside","leaving_checkppoint_id_inner","succ","addOrUpdate","_fcm_observer","data_fcm","trip_intersection_id","updatedKey","distanceKey","intersectionKey","getTripintersection","user","modifiedObject","active_trip_id","trip_intersection","newUser","Promise","all","status","getUserlocation","userPosition","splice","array","refresh_users_positions","Newusers","interval2","dynamicSuggestedSpeedModel","alert","ionViewDidEnter","fcm_message_broker","geofenceCount","onTransitionReceived","resp","writeLogEvents","object","Object","assign","table","fileEvent","destination_id","card","signaling","finalDistance","time","getNavigationalInformation","legInProcess","legInterval","calculateLegdistance","getNavigationalSigns","directionalIcon","loadmap","interval1","createCircle","distanceCalculator","updateUserPosition","chossed_route_id","distanceToCover_forSwarm","distanceToCover_forUser","ETA_forExpectedSwarm","calculateETADynamic","ETA_swarm","ETA_forUser","ETA_user","isAbleToMakeSwarm","trips_criteria","suggestedspeed","calculateSuggestedSpeed","leavingpoint_distance","user_distance_to_leaving_point","ETA_toLeavingPoint","user_ETA_to_leaving_point","refreshMarkerPopup","ionViewWillLeave","document","getElementById","outerHTML","geoInterval","event_stop","stopLocate","stopService","ionViewDidLeave","unsubscribe","removeAll","DrawNewPolyline","Overlapsegeometry","newMeetlat","newMeetlng","newLeavelat","newLeavelng","overlapsePolyline","polyline","weight","opacity","lineJoin","options","useLocale","maxResults","defaultLocale","reverseGeocode","result","thoroughfare","addTurnNavigation","idx","str","fencess","deleteDraw","removeLayer","tileLayer","fitBounds","getBounds","destinationIcon","startMarkerIcon","marker2","locate","setView","enableHighAccuracy","watch","timeout","maximumAge","accuracy","latlng","getLatLng","myPositionIcon","Number","isNaN","sSpeed","SpeedDeviationFactor","lowerLimit","upperLimit","showCurrentSpeed","showCurrentSpeedColor","gaugeValue","cercleFlag","c","accuracyMarkerFlag","openPopup","closePopup","onLocationError","getCurrentPosition","coords","click","cameraTracker","createCheckpoints","path","distance_of_leg","meetingpoint","selected","leaveSelected","_leaflet_id","remove","getRandomArbitrary","min","max","random","pos","postUserlocation","getUpdated_cercle","showSwarmInformation","border_color","numberOfMembersInSwarm","getSwarmLength","setRadius","setStyle","switchoncamera","$event","load_positions","positions","tripstatus","putTrips","last_trip_deleted_successfully","set","off","navigateRoot","encoded","points","len","shift","charAt","charCodeAt","dlat","dlng","reachable","numberCheck","footerColor","closest","indexOf","currP","currentPolyline","slice","d","ETA","yourETA","dista","error2","getPopup","getContent","recommended_speed","popupContent","setContent","update","NewUserAlert","create","subHeader","buttons","present","dismiss","presentAlert","header","handler","writeLogs","geofenceDebug","navigational_radius","fence","leg","navigational_leave_radius","fence_leave_next_leg","includes","destination_radius","eventtype","coordonate","prevLog","prev","__this","NativeLogs","getLog","_logs","logg","filelog","s","showsecondline","uiShowSubscriptions","ui_showCurrentSpeed","args","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}